<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta name="baidu-site-verification" content="code-mYFXUn9LOL"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MySQL 学习笔记 | LLQWQ的博客</title><meta name="keywords" content="待整理,数据库,MySQL"><meta name="author" content="LLQWQ"><meta name="copyright" content="LLQWQ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="格式待整理">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 学习笔记">
<meta property="og:url" content="http://llqwq.gitee.io/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/index.html">
<meta property="og:site_name" content="LLQWQ的博客">
<meta property="og:description" content="格式待整理">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://llqwq.gitee.io/img/db-cover.jpg">
<meta property="article:published_time" content="2019-09-04T16:00:00.000Z">
<meta property="article:modified_time" content="2021-04-09T02:30:43.848Z">
<meta property="article:author" content="LLQWQ">
<meta property="article:tag" content="待整理">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://llqwq.gitee.io/img/db-cover.jpg"><link rel="shortcut icon" href="/img/48668845.jpg"><link rel="canonical" href="http://llqwq.gitee.io/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/LLQWQ" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-04-09 10:30:43'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/48668845.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fa fa-book"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/db.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">LLQWQ的博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fa fa-book"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL 学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-09-04T16:00:00.000Z" title="发表于 2019-09-05 00:00:00">2019-09-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-04-09T02:30:43.848Z" title="更新于 2021-04-09 10:30:43">2021-04-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BE%85%E6%95%B4%E7%90%86/">待整理</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>48分钟</span></span><span class="post-meta-separator">|</span><span class="leancloud_visitors" id="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/" data-flag-title="MySQL 学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>格式待整理</p>
<span id="more"></span>

<h1 id="mysql-语法规范"><a href="#mysql-语法规范" class="headerlink" title="mysql 语法规范"></a>mysql 语法规范</h1><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%201%204.png" alt="Pasted image 1 4.png"></p>
<hr>
<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><h2 id="DQL-data-query-language-语言"><a href="#DQL-data-query-language-语言" class="headerlink" title="DQL(data query language)语言"></a>DQL(data query language)语言</h2><h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># mysql查询语法</span><br><span class="line"><span class="keyword">select</span> 查询列表 <span class="keyword">from</span> 表名</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">特点：</span></span><br><span class="line"><span class="comment">1. 查询列表可以是：表字段、常量值、表达式、函数</span></span><br><span class="line"><span class="comment">2. 查询结果可以是一个虚拟的表(dual)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"># 表达式</span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span><span class="operator">*</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span><span class="operator">*</span><span class="number">2</span> <span class="keyword">from</span> dual;</span><br><span class="line"># 常量值</span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span>;</span><br><span class="line"># 函数</span><br><span class="line"><span class="keyword">select</span> version();</span><br><span class="line"># mysql中的<span class="operator">+</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">在mysql中的+号只有一个功能：运算符</span></span><br><span class="line"><span class="comment">所以并不能作为字符串的拼接符，如需拼接字符串需要使用concat函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span><span class="operator">+</span><span class="number">2</span>; # 当加号两边都为数值类型则会进行相加；结果为：<span class="number">102</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;100&#x27;</span><span class="operator">+</span><span class="number">2</span>; # 当其中一个或两个都为字符型的话则尝试将字符类型转换为数值类型；结果：<span class="number">102</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;join&#x27;</span><span class="operator">+</span><span class="number">2</span>; # 当字符型不能转换为数值型的话，那个类型的值将会变为<span class="number">0</span>；结果：<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">null</span><span class="operator">+</span><span class="number">2</span>; # 当其中一个值为<span class="keyword">null</span>结果必为<span class="keyword">null</span>；结果：<span class="keyword">null</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># mysql查询语法</span><br><span class="line"><span class="keyword">select</span> 查询列表 <span class="keyword">from</span> 表名 <span class="keyword">where</span> 筛选条件;</span><br><span class="line"># 模糊</span><br><span class="line"># _ 代表单个字符</span><br><span class="line"># <span class="operator">%</span> 代表多个字符</span><br><span class="line"># 可以使用\ 转义，也可以使用自定义转义符：</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;_$_%&#x27;</span> excape <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line"># 上面那个例子中就将$定义为转义符了</span><br><span class="line"></span><br><span class="line"># 安全等于 <span class="operator">&lt;=&gt;</span> 可以判断<span class="keyword">null</span>和普通数值</span><br><span class="line"># 不等于也可以写成 <span class="operator">&lt;&gt;</span></span><br><span class="line"># 去重 <span class="keyword">distinct</span></span><br></pre></td></tr></table></figure>

<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">语法：</span></span><br><span class="line"><span class="comment">select 查询列表 from 表名 [where 筛选条件] order by 排序字段 [asc|desc]</span></span><br><span class="line"><span class="comment">asc 升序</span></span><br><span class="line"><span class="comment">desc 降序</span></span><br><span class="line"><span class="comment">当排序字段为多个的情况下，排序规则为先根据前面的字段进行排序，当前的字段有相同值的情况再根据后面的字段进行比较排序</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">除了limit子句外其他的子句都是放在order by之前的</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/panchanggui/p/10652322.html">https://www.cnblogs.com/panchanggui/p/10652322.html</a><br><strong>分类：</strong></p>
<ul>
<li>单行函数<br>如：length、concat、ifnull 等<ul>
<li>字符函数</li>
<li>数学函数</li>
<li>日期函数</li>
<li>其他函数</li>
<li>流程控制函数</li>
</ul>
</li>
<li>分组函数<br>功能：做统计使用，又称为统计函数、组函数、聚合函数</li>
</ul>
<h3 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h3><ul>
<li>sum 计算总和</li>
<li>avg 计算平均数</li>
<li>max 计算最大值</li>
<li>min 计算最小值</li>
<li>count 计算次数</li>
</ul>
<blockquote>
<p>特点：</p>
<ol>
<li>sum、avg 一般用于处理数值类型<br>max、min、count 可以处理任何类型</li>
<li>以上分组函数都忽略 null 值</li>
<li>可以搭配 distinct 实现去重运算</li>
</ol>
</blockquote>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">语法：</span></span><br><span class="line"><span class="comment">select分组函数,列(要求出现在group by的后面)</span></span><br><span class="line"><span class="comment">from表</span></span><br><span class="line"><span class="comment">[where 筛选条件]</span></span><br><span class="line"><span class="comment">group by 分组的列表</span></span><br><span class="line"><span class="comment">[order by子句]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p><strong>按年代分类：</strong></p>
<ul>
<li>sql92 标准：仅仅只支持内连接</li>
<li>sql99 标准【推荐】</li>
</ul>
<p><strong>按功能分类：</strong></p>
<ul>
<li>内连接<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接<ul>
<li>左外链接</li>
<li>右外连接</li>
<li>全外连接</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">select 查询列表</span></span><br><span class="line"><span class="comment">from 表1 别名 [连接类型]</span></span><br><span class="line"><span class="comment">join 表2 别名</span></span><br><span class="line"><span class="comment">on 连接条件</span></span><br><span class="line"><span class="comment">[where 筛选条件]</span></span><br><span class="line"><span class="comment">Lgroup by 分组]</span></span><br><span class="line"><span class="comment">[having 筛选条件]</span></span><br><span class="line"><span class="comment">[order by 排序列表]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">内连接 inner</span></span><br><span class="line"><span class="comment">左外链接 left [outer]</span></span><br><span class="line"><span class="comment">右外连接 rigth [outer]</span></span><br><span class="line"><span class="comment">全外连接 full [outer]</span></span><br><span class="line"><span class="comment">交叉连接 cross</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">应用场景: 用于查询一个表中有,另一个表没有的记录</span></span><br><span class="line"><span class="comment">特点:</span></span><br><span class="line"><span class="comment">1. 外连接的查询结果为主表中的所有记录</span></span><br><span class="line"><span class="comment">	如果从表中有和它匹配的,则显示匹配的值</span></span><br><span class="line"><span class="comment">	如果从表中没有和它匹配的,则显示null</span></span><br><span class="line"><span class="comment">	外连接查询结果=内连接结果+主表中有而从表没有的记录</span></span><br><span class="line"><span class="comment">2. 左外连接,left join左边的是主表</span></span><br><span class="line"><span class="comment">   右外连接,right join右边的是主表</span></span><br><span class="line"><span class="comment">3. 左外和右外交换两个表的顺序,可以实现同样的效果</span></span><br><span class="line"><span class="comment">4. 全外连接=内连接的结果+表1中有但表2没有的+表2中有但表1没有的</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">交叉查询和普通多表莫得区别，就是将逗号换成了cross关键字</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p><strong>分类:</strong></p>
<ul>
<li>按子查询出现的位置:<ul>
<li>select 后面:<ul>
<li>仅仅支持标量子查询</li>
</ul>
</li>
<li>from 后面:<ul>
<li>支持表子查询</li>
</ul>
</li>
<li>where 或 having 后面：<ul>
<li>标量子查询(单行)</li>
<li>列子查询(多行)</li>
<li>行子查询</li>
</ul>
</li>
<li>exists 后面(相关子查询)<ul>
<li>ps: exists 是一个函数，它只关心括号内的是否有值，有值就返回 1 莫得值就返回 0</li>
<li>表子查询</li>
</ul>
</li>
</ul>
</li>
<li>按结果集的行列数不同:<ul>
<li>标量子查询(结果集只有一行一列)</li>
<li>列子查询(结果集只有一列多行)</li>
<li>行子查询(结果集有一行多列)</li>
<li>表子查询(结果集一般为多行多列)</li>
</ul>
</li>
</ul>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>limit</p>
<h3 id="union-联合查询"><a href="#union-联合查询" class="headerlink" title="union 联合查询"></a>union 联合查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">语法：</span></span><br><span class="line"><span class="comment">select 查询字段 from 表名 where 筛选条件</span></span><br><span class="line"><span class="comment">union</span></span><br><span class="line"><span class="comment">select 查询字段 from 表名 where 筛选条件</span></span><br><span class="line"><span class="comment">union</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">作用：将多个结果集合并到一起</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">场景：有A、B、C三张表，其中a表存了用户的邮箱，b表存了用户的用户名，c表存了用户的手机号，要求可以通过用户输入的值（因为不知道用户输入的是手机号还是用户名和邮箱，所以需要查询三张表然后再将结果集合并）查询出对应的用户</span></span><br><span class="line"><span class="comment">select * from a where email like &#x27;%value%&#x27;</span></span><br><span class="line"><span class="comment">union</span></span><br><span class="line"><span class="comment">select * from b where username like &#x27;%value%&#x27;</span></span><br><span class="line"><span class="comment">union</span></span><br><span class="line"><span class="comment">select * from c where phone like &#x27;%value%&#x27;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">特点:</span></span><br><span class="line"><span class="comment">1. 要求多条查询语句的查询列数是一致的!</span></span><br><span class="line"><span class="comment">2. 要求多条查询语句的查询的每一列的类型和顺序最好一致</span></span><br><span class="line"><span class="comment">3. union关键字默认去重,如果使用union all 可以包含重复项</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="DML-data-manipulation-language-语言"><a href="#DML-data-manipulation-language-语言" class="headerlink" title="DML(data manipulation language)语言"></a>DML(data manipulation language)语言</h2><h3 id="插入语句"><a href="#插入语句" class="headerlink" title="插入语句"></a>插入语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 方式一：</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">set</span> 字段名<span class="operator">=</span>值;</span><br><span class="line"># 方式二：</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名[(字段)] valuse(值);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名[(字段)] valuse(值),(值),(值)...;</span><br><span class="line"># 支持子查询</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名[(字段)] 子查询语句;</span><br></pre></td></tr></table></figure>

<h3 id="修改语句"><a href="#修改语句" class="headerlink" title="修改语句"></a>修改语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1.</span> 修改单张表的记录</span><br><span class="line">update 表名 <span class="keyword">set</span> 列<span class="operator">=</span>值 [<span class="keyword">where</span> 筛选条件];</span><br><span class="line"></span><br><span class="line"># <span class="number">2.</span>修改多表的记录</span><br><span class="line"># 语法:</span><br><span class="line"># sql92语法:</span><br><span class="line">update 表<span class="number">1</span> 别名,表<span class="number">2</span> 别名</span><br><span class="line">	<span class="keyword">set</span> 列<span class="operator">=</span>值,</span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line"><span class="keyword">and</span> 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99语法:</span><br><span class="line">update 表<span class="number">1</span> 别名</span><br><span class="line">	<span class="keyword">inner</span> <span class="operator">|</span> <span class="keyword">left</span> <span class="operator">|</span> <span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">set</span> 列<span class="operator">=</span>值</span><br><span class="line"><span class="keyword">where</span> 筛选条件;</span><br></pre></td></tr></table></figure>

<h3 id="删除语句"><a href="#删除语句" class="headerlink" title="删除语句"></a>删除语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 方式一：<span class="keyword">delete</span></span><br><span class="line"># 语法：</span><br><span class="line"># 单表的删除</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 筛选条件;</span><br><span class="line"># 多表的删除</span><br><span class="line"># sql92语法:</span><br><span class="line"><span class="keyword">delete</span> 表<span class="number">1</span>的别名, 表<span class="number">2</span>的别名 # 如果只想删除表<span class="number">1</span>中的数据，这里就不需要写表<span class="number">2</span>的别名</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名, 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line">	<span class="keyword">and</span> 筛选条件;</span><br><span class="line"></span><br><span class="line"># sql99语法:</span><br><span class="line"><span class="keyword">delete</span> 表<span class="number">1</span>的别名, 表<span class="number">2</span>的别名</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名</span><br><span class="line">	<span class="keyword">inner</span> <span class="operator">|</span> <span class="keyword">left</span> <span class="operator">|</span> <span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名 <span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">where</span> 筛选条件;</span><br><span class="line"></span><br><span class="line"># 方式二：<span class="keyword">truncate</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ps：在 oracle 中使用 delete 进行删除的话可以不需要使用 from 关键字</p>
</blockquote>
<p><strong>delete 和 truncate 的区别：</strong></p>
<ol>
<li>delete 可以加 where 条件，truncate 不能加</li>
<li>truncate 删除,效率高一丢丢</li>
<li>假如要删除的表中有自增长列，如果用 delete 删除后,再插入数据， <strong>自增长列的值从断点开始</strong> 而 truncate 删除后,再插入数据， <strong>自增长列的值从 1 开始</strong></li>
<li>truncate 删除<strong>没有返回值</strong>，delete 删除<strong>有返回值</strong> (使用 delete 删除会返回 n 行受影响，但使用 truncate 删除只会返回 0 行受影响)</li>
<li>truncate 删除<strong>不能回滚</strong>，delete 删除<strong>可以回滚</strong>。</li>
</ol>
<h2 id="DDL-data-define-language-语言"><a href="#DDL-data-define-language-语言" class="headerlink" title="DDL(data define language)语言"></a>DDL(data define language)语言</h2><blockquote>
<p>ddl 语言解释：数据定义语言</p>
</blockquote>
<h3 id="库和表管理"><a href="#库和表管理" class="headerlink" title="库和表管理"></a>库和表管理</h3><h4 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h4><p><strong>库的管理分为：创建、修改、删除</strong></p>
<ol>
<li><p>库的创建</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 语法：create database [if not exists]库名;</span><br><span class="line"># if not exists 的意思是当库不存在就创建</span><br><span class="line"># 案例:创建库Books</span><br><span class="line">CREATE DATABASE IF NOT EXISTS books;</span><br></pre></td></tr></table></figure></li>
<li><p>库的修改</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改库的名称（重命名）语法：</span><br><span class="line">RENAME DATABASE books TO 新库名; # 目前这种方法不支持了，因为这种方法会导致数据的丢失</span><br><span class="line"></span><br><span class="line"># 更改库的字符集</span><br><span class="line">ALTER DATABASE books CHARACTER SET gbk;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ps：如果实在需要修改库的名称的话，可以通过重命名 data 文件夹下的对应库的文件夹名称</p>
<p>data 文件夹默认在：<code>C:\ProgramData\MySQL\MySQL Server 8.0\Data</code></p>
<p>当 mysql 中每创建一个库就会在 data 文件夹中创建一个对应名称的文件夹</p>
<p>不过以上的方法可能也会有一点问题，所以推荐将<strong>数据导出再创建库导入</strong>的方式来曲线救国</p>
</blockquote>
</li>
<li><p>库的删除</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> books;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h4><p><strong>表的管理分为：创建、修改、删除</strong></p>
<ol>
<li><p>创建: create</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">语法:</span></span><br><span class="line"><span class="comment">create table 表名(</span></span><br><span class="line"><span class="comment">列名 列的类型[长度] [约束]</span></span><br><span class="line"><span class="comment">列名 列的类型[长度] [约束]</span></span><br><span class="line"><span class="comment">列名 列的类型[长度] [约束]</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">);</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
<li><p>修改: alter</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 语法</span><br><span class="line">alter table 表名 add | drop | modify | change column 列名 [列类型 约束]</span><br><span class="line"></span><br><span class="line"># 修改列名</span><br><span class="line"># 语法：ALTER TABLE 表名 CHANGE [COLUMN] 旧列名 新列名 列类型;</span><br><span class="line">ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;</span><br><span class="line"></span><br><span class="line"># 修改列的类型或约束</span><br><span class="line"># 语法：ALTER TABLE 表名 MODIFY COLUMN 列名 类型&#x2F;约束;</span><br><span class="line">ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</span><br><span class="line"></span><br><span class="line"># 添加新列</span><br><span class="line"># 语法：ALTER TABLE 表名 ADD COLUMN 列名 列类型;</span><br><span class="line">ALTER TABLE author ADD COLUMN annual DOUBLE;</span><br><span class="line"></span><br><span class="line"># 删除列</span><br><span class="line"># 语法：ALTER TABLE 表名 DROP COLUMN 列名;</span><br><span class="line">ALTER TABLE author DROP COLUMN annual;</span><br><span class="line"></span><br><span class="line"># 修改表名</span><br><span class="line"># 语法：ALTER TABLE 表名 RENAME TO 新表名</span><br><span class="line">ALTER TABLE author RENAME TO author;</span><br></pre></td></tr></table></figure></li>
<li><p>删除: drop</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 表的删除</span><br><span class="line"># 语法：DROP TABLE [IF EXISTS] 表名;</span><br><span class="line">DROP TABLE IF EXISTS book_author;</span><br></pre></td></tr></table></figure></li>
<li><p>表的复制</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#1.仅仅复制表的结构</span><br><span class="line">CREATE TABLE copy LIKE author;</span><br><span class="line"></span><br><span class="line">#2.复制表的结构+效据</span><br><span class="line">CREATE TABLE copy2</span><br><span class="line">	SELECT*FROM author;</span><br><span class="line"></span><br><span class="line">#只复制部分数据</span><br><span class="line">CREATE TABLE copy3</span><br><span class="line">    SELECT id,au_name</span><br><span class="line">    FROM author</span><br><span class="line">    WHERE nation&#x3D;&#39;中国&#39;;</span><br><span class="line"></span><br><span class="line"># 只复制部分结构</span><br><span class="line">CREATE TABLE copy4</span><br><span class="line">    SELECT id,au_name</span><br><span class="line">    FROM author</span><br><span class="line">    WHERE 0;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="常见数据类型介绍"><a href="#常见数据类型介绍" class="headerlink" title="常见数据类型介绍"></a>常见数据类型介绍</h3><blockquote>
<p>MySQL 中定义数据字段的类型对你数据库的优化是非常重要的。</p>
<p>MySQL 支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p>
</blockquote>
<p><a href="MySQL-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">mysql 数据类型</a></p>
<h3 id="常见约束"><a href="#常见约束" class="headerlink" title="常见约束"></a>常见约束</h3><h4 id="六大约束："><a href="#六大约束：" class="headerlink" title="六大约束："></a><strong>六大约束：</strong></h4><ul>
<li>not null 非空约束</li>
<li>default 默认</li>
<li>primary key 主键约束</li>
<li>unique 唯一约束</li>
<li>check 检查约束</li>
<li>foreign key 外键约束</li>
</ul>
<h4 id="约束的添加分类："><a href="#约束的添加分类：" class="headerlink" title="约束的添加分类："></a><strong>约束的添加分类：</strong></h4><ul>
<li><p>列级约束</p>
<ul>
<li><p>六大约束语法上都支持列级约束，<strong>但外键没有效果</strong></p>
</li>
<li><p>```mysql</p>
<h1 id="添加列级约束，创建表的时候直接在类型后面加就好啦"><a href="#添加列级约束，创建表的时候直接在类型后面加就好啦" class="headerlink" title="添加列级约束，创建表的时候直接在类型后面加就好啦"></a>添加列级约束，创建表的时候直接在类型后面加就好啦</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 表级约束</span><br><span class="line"></span><br><span class="line">  - 除了非空、默认，其他的都支持</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;mysql</span><br><span class="line">    # 创建表级约束</span><br><span class="line">    constraint 约束名 约束类型(字段名)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="主键和非空的对比："><a href="#主键和非空的对比：" class="headerlink" title="主键和非空的对比："></a><strong>主键和非空的对比：</strong></h4><table>
<thead>
<tr>
<th></th>
<th>保证唯一性</th>
<th>是否允许为空</th>
<th>一个表中允许有多少个</th>
</tr>
</thead>
<tbody><tr>
<td>主键(primary key)</td>
<td>🙂√</td>
<td>🙃×</td>
<td>最多一个</td>
</tr>
<tr>
<td>唯一(unique)</td>
<td>🙂√</td>
<td>🙂√</td>
<td>多个</td>
</tr>
</tbody></table>
<h4 id="修改表时添加约束"><a href="#修改表时添加约束" class="headerlink" title="修改表时添加约束"></a>修改表时添加约束</h4><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707160215003.png" alt="image-20200707160215003"></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707155946478.png" alt="image-20200707155946478"></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707160044655.png" alt="image-20200707160044655"></p>
<h4 id="修改表时删除约束"><a href="#修改表时删除约束" class="headerlink" title="修改表时删除约束"></a>修改表时删除约束</h4><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707160430197.png" alt="image-20200707160430197"></p>
<h4 id="自增（标识列）"><a href="#自增（标识列）" class="headerlink" title="自增（标识列）"></a>自增（标识列）</h4><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707161042486.png" alt="image-20200707161042486"></p>
<p><strong>修改表时设置标识列</strong></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707161147002.png" alt="image-20200707161147002"></p>
<p><strong>修改表时删除标识列</strong></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707161310445.png" alt="image-20200707161310445"></p>
<h2 id="TCL-Transation-Control-Language-语言"><a href="#TCL-Transation-Control-Language-语言" class="headerlink" title="TCL(Transation Control Language)语言"></a>TCL(Transation Control Language)语言</h2><p><strong>事务控制语言</strong></p>
<h3 id="事务的特性"><a href="#事务的特性" class="headerlink" title="事务的特性"></a>事务的特性</h3><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707161635495.png" alt="image-20200707161635495"></p>
<h3 id="事务和事务处理"><a href="#事务和事务处理" class="headerlink" title="事务和事务处理"></a>事务和事务处理</h3><p><strong>事务分为隐式事务和显示事务</strong></p>
<ul>
<li><strong>隐式事务</strong><ul>
<li>没有明显的开始和结束标记</li>
<li>比如：insert、update、delete</li>
</ul>
</li>
<li><strong>显式事务</strong><ul>
<li>具有明显的开始和结束标记</li>
<li>开启显示事务的前提是，需要<strong>关闭事务的自动提交</strong></li>
</ul>
</li>
</ul>
<blockquote>
<p>在 mysql 中可以被事务控制的只有 dml 和 dql 语言，且 mysql 默认开启了事务自动提交功能，也就是每条 dml 和 dql 语言都会自动提交</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 可以使用如下语句查看是否开启了自动提交</span><br><span class="line">show variables like ‘autocommit’;</span><br><span class="line"># 关闭自动提交</span><br><span class="line">set autocommit&#x3D;0;</span><br><span class="line"></span><br><span class="line"># 开启显式事务</span><br><span class="line">start transation; # 这个是可选的</span><br><span class="line">insert into...</span><br><span class="line">update...</span><br><span class="line">delete...</span><br><span class="line"># 选择提交还是回滚</span><br><span class="line">commit;</span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<p><strong>保存点(savepoint)</strong></p>
<blockquote>
<p>保存点作用：允许让事务回滚到设点的保存点，可以理解为<strong>游戏里的存档</strong></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 设置保存点</span><br><span class="line">delete from emp where id &#x3D; 1; # 在这一步删除id为1的员工</span><br><span class="line">savepoint a; # 设定一个保存点</span><br><span class="line">delete from emp where id &#x3D;2; # 在这一步删除id为2的员工</span><br><span class="line">rollback to a; # 将事务回滚到保存点a，回滚之后会发现id为1的员工被删除了，但id为2的员工还存在</span><br></pre></td></tr></table></figure>

<h3 id="事务并发问题"><a href="#事务并发问题" class="headerlink" title="事务并发问题"></a>事务并发问题</h3><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707170436873.png" alt="image-20200707170436873"></p>
<blockquote>
<p>对于以上问题可以通过设置事务的隔离级别进行解决</p>
<p>每个数据库都有对应的事务隔离级别的实现</p>
</blockquote>
<h3 id="事务隔离"><a href="#事务隔离" class="headerlink" title="事务隔离"></a>事务隔离</h3><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707171431091.png" alt="image-20200707171431091"></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707171531156.png" alt="image-20200707171531156"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 在mysql中可以通过&#96;select @@tx_isolation&#96;来查看数据库当前的隔离级别</span><br><span class="line">select @@tx_isolation</span><br><span class="line"># 设置其他的事务隔离级别</span><br><span class="line">set session transation isolation level read uncommitted</span><br><span class="line"># 设置全局的就将session改为global</span><br></pre></td></tr></table></figure>

<p><strong>4 种隔离级别的比较：</strong></p>
<p>比较可以解决哪些事务并发问题</p>
<p>√ 为会出现的问题</p>
<p>× 为不会出现的问题</p>
<table>
<thead>
<tr>
<th></th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>read uncommitted</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>read committed</td>
<td>×</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>repeatable read</td>
<td>×</td>
<td>×</td>
<td>√</td>
</tr>
<tr>
<td>serializable</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody></table>
<blockquote>
<p>mysql 中默认 第三个隔高级别 <code>repeatable read</code><br>oracle 中默认第二个隔高级别 <code>read committed</code></p>
</blockquote>
<hr>
<h1 id="mysql-安装-windows-版"><a href="#mysql-安装-windows-版" class="headerlink" title="mysql 安装(windows 版)"></a>mysql 安装(windows 版)</h1><p><strong>本节安装的 mysql 版本为 8.0.20</strong></p>
<ol>
<li><p>官网下载 mysql 安装文件</p>
<ol>
<li>官网网址：<a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a> ，如果嫌弃访问慢可以使用搜狐的 mysql 镜像 <a target="_blank" rel="noopener" href="http://mirrors.sohu.com/mysql/">http://mirrors.sohu.com/mysql/</a></li>
<li><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/">下载页面</a><br><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%201%201.png" alt="./images/Pasted image 1 1.png"></li>
<li><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/20210409102739.png" alt="downloads"></li>
<li>这个的界面是下载的 zip，如果想下载安装程序点击之前页面的<code>Go to Download Page</code>按钮</li>
<li>下载这个 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/20210409102908.png" alt="downloads"></li>
</ol>
</li>
<li><p>安装</p>
<ol>
<li><p>双击安装程序（可能要等一会）</p>
</li>
<li><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%205%201.png" alt="./images/Pasted image 5 1.png"></p>
</li>
<li><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%206.png" alt="数据库/mysql/images/Pasted image 6.png"></p>
</li>
<li><p>点 execute 然后等待下载就好啦 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%201%202.png" alt="./images/Pasted image 1 2.png"></p>
</li>
<li><p>安装好了之后点击 next <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%203%201-1594046783783.png" alt="./images/Pasted image 3 1.png"></p>
</li>
<li><p>点 next <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%204%201-1594046791886.png" alt="./images/Pasted image 4 1.png"></p>
</li>
<li><p>选择第一个 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%205%201-1594046798866.png" alt="./images/Pasted image 5 1.png"></p>
</li>
<li><p>点击 next<img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%204%201-1594046898158.png" alt="./images/Pasted image 4 1.png"></p>
</li>
<li><p>输入 root 账户密码，如果想添加其他用户就在 mysql user accounts 下面添加 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/01.png" alt="这里写图片描述"></p>
</li>
<li><p>在这里设置 windows 服务名称 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%209.png" alt="./images/Pasted image 9.png"></p>
</li>
<li><p>点击 execute 安装 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%2010.png" alt="./images/Pasted image 10.png"></p>
</li>
<li><p>点击 finish <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%2011.png" alt="./images/Pasted image 11.png"></p>
</li>
<li><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%201%203.png" alt="./images/Pasted image 1 3.png"></p>
</li>
<li><p>输入一下密码然后点击 next <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%202%202.png" alt="./images/Pasted image 2 2.png"></p>
</li>
<li><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%203%202.png" alt="./images/Pasted image 3 2.png"></p>
</li>
<li><p>然后一路 next 就安完啦 🥳</p>
</li>
</ol>
</li>
</ol>
<h1 id="MySQL-安装-Linux-版"><a href="#MySQL-安装-Linux-版" class="headerlink" title="MySQL 安装(Linux 版)"></a>MySQL 安装(Linux 版)</h1><blockquote>
<p>如果只是基础部分的学习这一节可以暂时不看</p>
<p>参考资料：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/yss818824/p/12349719.html">https://www.cnblogs.com/yss818824/p/12349719.html</a></p>
</blockquote>
<p>这里介绍两种安装方式：yum 安装和下载搜狐镜像手动安装</p>
<p>在两种方式下载之前先使用如下命令删除之前安装过的 mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mysql #找到已装的rpm包名,如果有安装过的mysql就使用下面这个命令</span><br><span class="line">yum -y remove 包名 #卸载，包名是上面命令列出来的，如果没有列出来就是没安装过</span><br><span class="line">cd /opt # 移动到opt目录</span><br></pre></td></tr></table></figure>

<h2 id="yum-安装"><a href="#yum-安装" class="headerlink" title="yum 安装"></a>yum 安装</h2><ol>
<li><p> 访问 <a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/repo/yum/">https://dev.mysql.com/downloads/repo/yum/</a> 下载 yum 的仓库下载包</p>
</li>
<li><p>下载对应 linux 版本的仓库下载包（我的是 centos7 所以就下 linux7）</p>
<p> <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200714083401273.png" alt="image-20200714083401273"></p>
</li>
<li><p>这里有两种下载方式：</p>
<ol>
<li> 下载到本地然后传到 linux 里面</li>
<li> 复制下载链接，在 linux 里面使用 wget 命令下载<code>wget 下载网址</code></li>
</ol>
</li>
<li><p> 将 rpm 包下载到 linux 里面后使用<code>rpm -ivh rpm包名</code>进行下载</p>
</li>
<li><p> 安装之前先清除缓存<code>yum clean all</code></p>
</li>
<li><p> 然后使用<code>yum install mysql-server</code>进行安装</p>
</li>
</ol>
<h2 id="搜狐镜像手动安装"><a href="#搜狐镜像手动安装" class="headerlink" title="搜狐镜像手动安装"></a>搜狐镜像手动安装</h2><p><strong>这里以下载 mysql8.0.20 为例</strong></p>
<ol>
<li><p> 访问 <a target="_blank" rel="noopener" href="http://mirrors.sohu.com/mysql/MySQL-8.0/">http://mirrors.sohu.com/mysql/MySQL-8.0/</a> 进入搜狐 mysql 镜像下载地址</p>
</li>
<li><p> 按 ctrl+f 搜索 community（community 是社区的意思）</p>
</li>
<li><p>下载 client、server、common、libs 的安装包（rpm）</p>
<blockquote>
<p>注意：el7 是 linux 的版本，如果是 centos7 就下 el7，如果是 centos8 就下载 el8</p>
<p>x86_64 是架构</p>
</blockquote>
<p> <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200713160747557.png" alt="image-20200713160747557"></p>
<p> <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200713160824285.png" alt="image-20200713160824285"></p>
</li>
<li><p> 打开虚拟机，将这两个安装包传到 centos 里面的 opt 目录下</p>
</li>
<li><p>使用如下命令</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|grep mysql #找到已装的rpm包名,如果有安装过的mysql就使用下面这个命令</span><br><span class="line">yum -y remove 包名 #卸载，包名是上面命令列出来的，如果没有列出来就是没安装过</span><br><span class="line">cd /opt # 移动到opt目录</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装顺序：common --&gt; libs --&gt; clients --&gt; server</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装命令</span></span><br><span class="line">rpm -ivh mysql-community-common-5.7.19-1.el6.x86_64.rpm mysql-community-libs-5.7.19-1.el6.x86_64.rpm mysql-community-client-5.7.19-1.el6.x86_64.rpm mysql-community-server-5.7.19-1.el6.x86_64.rpm # 后面的这些rpm写刚刚下载的rpm安装包</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p><strong>将 mysql 下载到 linux 里面后再进行这一步</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 先启动mysql</span></span><br><span class="line">systemctl start  mysqld.service</span><br><span class="line"><span class="meta">#</span><span class="bash"> 看一下状态是否是启动</span></span><br><span class="line">systemctl status mysqld.service</span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行成功之后查看mysql密码</span></span><br><span class="line">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200714084807164.png" alt="image-20200714084807164"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动mysql</span></span><br><span class="line">mysql -uroot -p</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入mysql之后不能做任何操作，需要先重新设置密码</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果做了操作会报错，这个错的意思就是要你先重置密码</span></span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200714085249682.png" alt="image-20200714085249682"></p>
<h3 id="设置密码和密码复杂度"><a href="#设置密码和密码复杂度" class="headerlink" title="设置密码和密码复杂度"></a><strong>设置密码和密码复杂度</strong></h3><blockquote>
<p>前排提醒：如果要将密码改成<code>12345678</code>的话，需要先将密码改成有大小写字母和数字且长度是八位的密码，然后再修改密码复杂度为 low，然后再将密码改成<code>12345678</code>。如果要改成<code>123456</code>的话还需要修改密码长度为六位。🙃 有点麻烦<br>注意看注释！！！！！！！！！！！！！！注意看注释！！！！！！！！！！</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 使用如下命令修改密码</span><br><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123456&#39;;</span><br><span class="line"># 其中‘123456’替换成你要设置的密码，注意:密码设置必须要大小写字母数字和特殊符号（,&#x2F;&#39;;:等）,不然不能配置成功。</span><br><span class="line"># 如果出现如下错误：</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200714085659414.png" alt="image-20200714085659414"></p>
<p>是因为密码的复杂度不符合默认规定，如下命令查看 mysql 默认密码复杂度：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 执行这个之前是需要修改默认密码的，如果想修改密码为123456可以先修改密码后再修改密码复杂度然后再修改密码</span><br><span class="line">SHOW VARIABLES LIKE &#39;validate_password%&#39;;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200714090733765.png" alt="image-20200714090733765"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 使用修改全局变量的方式去修改它</span><br><span class="line">set global validate_password.policy&#x3D;LOW;</span><br><span class="line"># validate_password.policy（校验规则），取值范围[0,1,2]，默认值1。0（LOW）：只校验长度；1（MEDIUM）：校验长度、大小写和特殊字符；2（STRONG）：校验长度、大小写、特殊字符和dictionary_file</span><br></pre></td></tr></table></figure>

<h3 id="开启-mysql-远程访问"><a href="#开启-mysql-远程访问" class="headerlink" title="开启 mysql 远程访问"></a><strong>开启 mysql 远程访问</strong></h3><p>记得关一下防火墙，或者防火墙开放 3306 端口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld # 关闭防火墙</span><br><span class="line">systemctl disable firewalld # 取消防火墙开机自启</span><br></pre></td></tr></table></figure>

<p>这里使用改表法去开启远程访问</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 进入到mysql库</span><br><span class="line">use mysql;</span><br><span class="line"># 查询mysql表的访问主机范围和用户</span><br><span class="line">select host, user from user;</span><br><span class="line"># 如果要开启root用户的远程访问，修改它的host为%</span><br><span class="line">update user set host &#x3D; &#39;%&#39; where user &#x3D; &#39;root&#39;;</span><br><span class="line"># 这句表示从mysql数据库的grant表中重新加载权限数据</span><br><span class="line">flush privileges; # 如果重启的话就不用执行这句话了</span><br><span class="line"># 如果还是不能访问，查看mysql是否只允许本地127.0.0.1访问</span><br><span class="line"># cat &#x2F;etc&#x2F;my.cnf</span><br><span class="line"># bind-address&#x3D;127.0.0.1    #去掉这一行，或者去掉</span><br><span class="line"># skip-networking</span><br><span class="line"># 重启mysql：service mysqld restart</span><br></pre></td></tr></table></figure>

<p><strong>设置开机启动</strong></p>
<p>使用<code>systemctl enable mysqld</code>来设置开机启动</p>
<h3 id="MySQL-安装目录"><a href="#MySQL-安装目录" class="headerlink" title="MySQL 安装目录"></a>MySQL 安装目录</h3><table>
<thead>
<tr>
<th></th>
<th>解释</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>/var/lib/mysql/</td>
<td>mysql 数据文件存放位置</td>
<td></td>
</tr>
<tr>
<td>/usr/share/mysql/</td>
<td>配置文件目录</td>
<td>mysqladmin、mysqldump 等命令</td>
</tr>
<tr>
<td>/usr/bin</td>
<td>相关命令目录</td>
<td></td>
</tr>
</tbody></table>
<h1 id="工具介绍"><a href="#工具介绍" class="headerlink" title="工具介绍"></a>工具介绍</h1><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%204%202.png" alt="./images/Pasted image 4 2.png"></p>
<ul>
<li>mysql 命令行连接器：<ul>
<li>MySQL 8.0 Command Line Client - Unicode</li>
<li>MySQL 8.0 Command Line Client</li>
</ul>
</li>
<li>MySQL Installer - Community： <strong>修改 mysql 安装配置的</strong></li>
<li>MySQL Workbench 8.0 CE： <strong>mysql 自带的图形界面</strong></li>
<li>MySQL Shell</li>
<li>MySQL Notifier 1.1.8 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%2012.png" alt="./images/Pasted image 12.png"></li>
</ul>
<h1 id="mysql-基础配置"><a href="#mysql-基础配置" class="headerlink" title="mysql 基础配置"></a>mysql 基础配置</h1><h2 id="mysql-的配置文件位置"><a href="#mysql-的配置文件位置" class="headerlink" title="mysql 的配置文件位置"></a>mysql 的配置文件位置</h2><p>默认位置是在<code>C:\ProgramData\MySQL\MySQL Server 8.0</code></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/image-20200707095630942.png" alt="image-20200707095630942"></p>
<h2 id="配置文件简单概述"><a href="#配置文件简单概述" class="headerlink" title="配置文件简单概述"></a>配置文件简单概述</h2><blockquote>
<p>这里只是概述，具体的详解见<a href="MySQL-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">mysql 配置文件详解</a></p>
<p>ini 语法见<a href="../../%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/ini/ini%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F.md">ini 语法</a></p>
</blockquote>
<p>以下配置只是其中的一部分，当需要修改 mysql 的连接端口时修改 port 即可</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># pipe=</span></span><br><span class="line"><span class="comment"># socket=MYSQL</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p>在 path 环境变量中添加 mysql server 安装路径\bin<br>如：我当前 mysql 安装路径在 c 盘<br>![./images/Pasted image 7 1.png]<br>进入到 mysql server 文件夹下的 bin 文件夹<br>我在 path 中就添加如下路径<code>C:\Program Files\MySQL\MySQL Server 8.0\bin</code></p>
<hr>
<h1 id="启动和关闭-mysql-服务"><a href="#启动和关闭-mysql-服务" class="headerlink" title="启动和关闭 mysql 服务"></a>启动和关闭 mysql 服务</h1><h2 id="界面的方式启动"><a href="#界面的方式启动" class="headerlink" title="界面的方式启动"></a>界面的方式启动</h2><ol>
<li>点击服务 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%202%201-1594047001888.png" alt="./images/Pasted image 2 1.png"></li>
<li>找到 mysql 服务并启动或关闭</li>
</ol>
<h2 id="命令行方式启动"><a href="#命令行方式启动" class="headerlink" title="命令行方式启动"></a>命令行方式启动</h2><ol>
<li>打开 cmd（需要使用管理员权限）</li>
<li>关闭 mysql 服务：<code>net stop &lt;服务名&gt;</code></li>
<li>启动 mysql 服务：<code>net start &lt;服务名&gt;</code></li>
</ol>
<hr>
<h1 id="mysql-登录和退出"><a href="#mysql-登录和退出" class="headerlink" title="mysql 登录和退出"></a>mysql 登录和退出</h1><h2 id="使用-mysql-自带的连接器连接"><a href="#使用-mysql-自带的连接器连接" class="headerlink" title="使用 mysql 自带的连接器连接"></a>使用 mysql 自带的连接器连接</h2><p>使用 MySQL 8.0 Command Line Client 连接 <img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%206%202.png" alt="./images/Pasted image 6 2.png"></p>
<h2 id="命令行连接"><a href="#命令行连接" class="headerlink" title="命令行连接"></a>命令行连接</h2><p>命令行中输入以下命令进行连接<br><code>mysql -h &lt;主机名/ip&gt; -P &lt;端口号&gt; -u &lt;用户名&gt; -p&lt;密码&gt;</code></p>
<blockquote>
<p>注意：使用-h -P -u 这些参数的时候后面可以不用加空格，但使用-p 参数时后面不能有空格如：<code>mysql -hlocalhost -P3306 -uroot -p123456</code>，如果写法为：<code>mysql -hlocalhost -P3306 -uroot -p 123456</code>则为错误的</p>
</blockquote>
<blockquote>
<p>-h 和 -P 参数默认值是 <code>localhost</code> 和 <code>3306</code>，所以如果连接本地的 mysql 连接的话可以不用加这两个参数</p>
</blockquote>
<p><strong>使用 exit 退出 mysql</strong></p>
<h2 id="使用第三方工具连接"><a href="#使用第三方工具连接" class="headerlink" title="使用第三方工具连接"></a>使用第三方工具连接</h2><p>使用<strong>Navicat Premium 15</strong>进行连接</p>
<hr>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p><strong>在 mysql 中变量分为以下几种类型：</strong></p>
<ul>
<li>系统变量<ul>
<li>全局变量</li>
<li>会话变量</li>
</ul>
</li>
<li>自定义变量<ul>
<li>用户变量</li>
<li>局部变量</li>
</ul>
</li>
</ul>
<h2 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h2><blockquote>
<p>📖 说明：变量由系统提供，而不是用户自定义的，属于服务器层面</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 查看当前会话的所有系统变量</span><br><span class="line">show session variables;</span><br><span class="line"># 查看全局的系统变量</span><br><span class="line">show global variables;</span><br><span class="line"># 查看符合条件的部分系统变量</span><br><span class="line">show session variables like &#39;%auto%&#39;;</span><br><span class="line"># 查看指定某个变量的值</span><br><span class="line">select @@global|[session].系统变量名;</span><br><span class="line"></span><br><span class="line"># 为某个系统变量赋值：</span><br><span class="line"># 方法一:</span><br><span class="line">set session 系统变量名&#x3D;值;</span><br><span class="line"># 方法二：</span><br><span class="line">set @@session.系统变量名&#x3D;值;</span><br><span class="line"># 如果是会话级别需要加session，如果是全局级别需要加global，不写的话默认是session</span><br></pre></td></tr></table></figure>

<blockquote>
<p>❗ 注意：</p>
<ul>
<li>全局变量<ul>
<li>只作用于全部会话，但是<strong>不能跨重启</strong>，也就是说重新启动服务之后设置过的值会变回<strong>默认状态</strong>。如果需要重启服务之后值不改变需要修改<strong>mysql 配置文件</strong></li>
</ul>
</li>
<li>会话变量<ul>
<li>只作用于<strong>当前会话</strong></li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><blockquote>
<p>📖 说明：自定义变量是属于用户创建的，不属于系统</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"># 声明自定义变量，用户变量要求必须加上@符</span><br><span class="line"># 方式一：</span><br><span class="line">set @用户变量名&#x3D;值;</span><br><span class="line"># 方式二：因为&#x3D;存在歧义，因为等号有两个作用1.赋值 2.比较 所以为了取消歧义可以使用:&#x3D;来变量的进行赋值</span><br><span class="line">set @用户变量名:&#x3D;值;</span><br><span class="line"># 方式三：可以使用select关键字进行赋值，但是赋值符号必须使用:&#x3D;</span><br><span class="line">select @用户变量名:&#x3D;值;</span><br><span class="line"></span><br><span class="line"># 赋值：</span><br><span class="line"># 方式一：上面的语句也可以用于赋值</span><br><span class="line">set @用户变量名&#x3D;值;</span><br><span class="line">set @用户变量名:&#x3D;值;</span><br><span class="line">select @用户变量名:&#x3D;值;</span><br><span class="line"># 方式二：使用select into</span><br><span class="line">select 字段 into @用户变量名 from 表名;</span><br><span class="line">select max(id) into @max_id from emp;</span><br><span class="line"></span><br><span class="line"># 查看</span><br><span class="line">select @用户变量名;</span><br><span class="line"></span><br><span class="line"># 以上定义的都是用户变量</span><br><span class="line"></span><br><span class="line"># 定义局部变量</span><br><span class="line"># 声明</span><br><span class="line">declare 变量名 类型;</span><br><span class="line">declare 变量名 类型 default 值;</span><br><span class="line"></span><br><span class="line"># 赋值</span><br><span class="line"># 通过set和select，定义局部变量不需要加@符</span><br><span class="line">set 局部变量名&#x3D;值;</span><br><span class="line">set 局部变量名:&#x3D;值;</span><br><span class="line">select @局部变量名:&#x3D;值; # 这是特例，用select关键字时需要加@符</span><br><span class="line"># 通过select into</span><br><span class="line">select 字段 into 局部变量名 from 表名;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>⚠️ 注意：</p>
<ul>
<li>用户变量<ul>
<li>作用于当前会话</li>
</ul>
</li>
<li>局部变量<ul>
<li>仅仅在定义它们的 begin end 中有效，且应用在 begin end 中的第一句话</li>
</ul>
</li>
</ul>
</blockquote>
<p><strong>局部变量和用户变量的比较：</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>作用域</th>
<th>定义和使用的位置</th>
<th>语法</th>
</tr>
</thead>
<tbody><tr>
<td>用户变量</td>
<td>当前的会话中</td>
<td>会话中的任何地方</td>
<td>必须加@符，不用限定类型</td>
</tr>
<tr>
<td>局部变量</td>
<td>begin end 中</td>
<td>只能在 begin end 中，且是 begin end 中的第一句话</td>
<td>一般不需要加@符，需要限定类型</td>
</tr>
</tbody></table>
<hr>
<h1 id="mysql-的常用命令"><a href="#mysql-的常用命令" class="headerlink" title="mysql 的常用命令"></a>mysql 的常用命令</h1><p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/Pasted%20image%2013.png" alt="./images/Pasted image 13.png"></p>
<h2 id="修改结束字符"><a href="#修改结束字符" class="headerlink" title="修改结束字符"></a>修改结束字符</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改之前</span><br><span class="line">select * from emp;</span><br><span class="line">delimiter $ # 修改结束字符为$</span><br><span class="line"># 修改之后</span><br><span class="line">select * from emp$</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="存储过程与存储函数"><a href="#存储过程与存储函数" class="headerlink" title="存储过程与存储函数"></a>存储过程与存储函数</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/chenhuabin/p/10142190.html">https://www.cnblogs.com/chenhuabin/p/10142190.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Bb15070047748/article/details/106292488">https://blog.csdn.net/Bb15070047748/article/details/106292488</a></p>
<p>MySQL 中提供存储过程与存储函数机制，我们姑且将存储过程和存储函数合称为存储程序。与一般的 SQL 语句需要先编译然后立即执行不同，存储程序是一组为了完成特定功能的 SQL 语句集，经编译后存储在数据库中，当用户通过指定存储程序的名字并给定参数（如果该存储程序带有参数）来调用才会执行。</p>
<p>存储程序就是一条或者多条 SQL 语句和控制语句的集合，我们可以将其看作 MySQL 的批处理文件，当然，其作用不仅限于批处理。当想要在不同的应用程序或平台上执行相同的功能一段程序或者封装特定功能时，存储程序是非常有用的。数据库中的存储程序可以看做是面向对编程中面向对象方法，它允许控制数据的访问方式。</p>
<p>存储函数与存储过程有如下区别：</p>
<p>（1）存储函数的限制比较多,例如不能用临时表,只能用表变量,而存储过程的限制较少，存储过程的实现功能要复杂些,而函数的实现功能针对性比较强。</p>
<p>（2）返回值不同。存储函数必须有返回值,且仅返回一个结果值；存储过程可以没有返回值,但是能返回结果集(out,inout)。</p>
<p>（3）调用时的不同。存储函数嵌入在 SQL 中使用,可以在 select 存储函数名(变量值)；存储过程通过 call 语句调用 call 存储过程名。</p>
<p>（4）参数的不同。存储函数的参数类型类似于 IN 参数，没有类似于 OUT 和 INOUT 的参数。存储过程的参数类型有三种，IN、out 和 INOUT：</p>
<p>a. in：数据只是从外部传入内部使用(值传递),可以是数值也可以是变量</p>
<p>b. out：只允许过程内部使用(不用外部数据),给外部使用的(引用传递:外部的数据会被先清空才会进入到内部),只能是变量</p>
<p>c. inout：外部可以在内部使用,内部修改的也可以给外部使用,典型的引用 传递,只能传递变量。</p>
<h1 id="3-存储过程、存储函数"><a href="#3-存储过程、存储函数" class="headerlink" title="3 存储过程、存储函数"></a>3 存储过程、存储函数</h1><h2 id="3-1-创建存储过程"><a href="#3-1-创建存储过程" class="headerlink" title="3.1 创建存储过程"></a>3.1 创建存储过程</h2><p>创建存储过程语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE  过程名([[IN|OUT|INOUT] 参数名 数据类型[,[IN|OUT|INOUT] 参数名 数据类型…]]) [特性 ...]</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    过程体</span><br><span class="line"></span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>​ CREATE PROCEDURE 是用来创建存储过程的关键字；[IN|OUT|INOUT]是参数的输入输出类型，IN 表示输入参数，OUT 表示输出参数，INOUT 表示既可以输入也可以输出；过程体是包含若干 SQL 语句或流程控制语句的集合，可以用 BEGIN…END 来包裹。</p>
<p>​ 在演示如果创建存储过程之前（emp 表、dept 表），先创建两个数据表，本文所有演示操作都基于这两个表来进行，创建表与插入数据 SQL 语句如下：</p>
<p><strong>emp 表：</strong></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219111636619-865486033.png" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="img">emp 表 SQL</p>
<p><strong>dept 表：</strong></p>
<p><strong><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219111700940-2040680975.png" alt="img"></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">SET NAMES utf8mb4;</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS &#x3D; 0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- Table structure for dept</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS &#96;dept&#96;;</span><br><span class="line"></span><br><span class="line">CREATE TABLE &#96;dept&#96;  (</span><br><span class="line"></span><br><span class="line">  &#96;deptno&#96; int(2) NOT NULL,</span><br><span class="line"></span><br><span class="line">  &#96;dname&#96; varchar(14) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL,</span><br><span class="line"></span><br><span class="line">  &#96;loc&#96; varchar(13) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL,</span><br><span class="line"></span><br><span class="line">  PRIMARY KEY (&#96;deptno&#96;) USING BTREE</span><br><span class="line"></span><br><span class="line">) ENGINE &#x3D; InnoDB CHARACTER SET &#x3D; latin1 COLLATE &#x3D; latin1_swedish_ci ROW_FORMAT &#x3D; Compact;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- Records of dept</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;dept&#96; VALUES (10, &#39;ACCOUNTING&#39;, &#39;NEW YORK&#39;);</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;dept&#96; VALUES (20, &#39;RESEARCH&#39;, &#39;DALLAS&#39;);</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;dept&#96; VALUES (30, &#39;SALES&#39;, &#39;CHICAGO&#39;);</span><br><span class="line"></span><br><span class="line">INSERT INTO &#96;dept&#96; VALUES (40, &#39;OPERATIONS&#39;, &#39;BOSTON&#39;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS &#x3D; 1;</span><br></pre></td></tr></table></figure>

<p>建好表后，我们来创建一个存储过程。</p>
<p><strong>示例 1：</strong>通过存储过程完成查询每个员工编号（empno）、姓名（ename）、职位（job）、领导编号（mgr）、领导姓名（empno）、部门名称（dname）、部门位置（loc）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">delimiter &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">create procedure select_pro()</span><br><span class="line"></span><br><span class="line">         begin</span><br><span class="line"></span><br><span class="line">                   select e1.empno bianhao, e1.ename xingming, e1.job zhiwei, e1.mgr lindaobianhao, e2.ename lindaoxingming, d.dname bumenmingchen, 　　　　　　　　　　　　　　　　d.loc bumenweizhi</span><br><span class="line"></span><br><span class="line">                   from emp e1 , emp e2 , dept d</span><br><span class="line"></span><br><span class="line">                   where e1.mgr&#x3D;e2.empno and e1.deptno&#x3D;d.deptno ;</span><br><span class="line"></span><br><span class="line">         end &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p>注：“delimiter //”语句的作用是将 MySQL 的结束符设置为//，因为 MySQL 默认的语句结束符是分号“；”，为了避免与存储过程中的 SQL 语句结束符相冲突，需要使用 delimiter 改变存储过程的结束符，设置为以“end //”结束存储过程。存储过程定义完毕之后，再使用“delimiter;”回复默认结束符。delimiter 也可以指定其他符号作为结束符（“\”除外，这是转义字符）。当然，如果你在 Navicat 等图形界面下进行，可以不用设置 delimiter。</p>
<p>示例 1 中 SQL 语句创建了一个名为 select_pro 的存储过程，通过“call select_pro()”，即可完成查询功能，不在需要每次查询都重写查询语句。</p>
<p><strong>示例 2：</strong>创建一个带参数的存储过程，删除 emp 表中 empno 为指定值得记录，并返回最高最高月薪，也返回大于指定月薪的人数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">delimiter &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">create procedure param_pro(in id int , out num int, inout p_sal int)</span><br><span class="line"></span><br><span class="line">         begin</span><br><span class="line"></span><br><span class="line">                   delete from emp where empno &#x3D; id ;</span><br><span class="line"></span><br><span class="line">                   select max(sal) from emp into num;</span><br><span class="line"></span><br><span class="line">                   select count(*)  into p_sal from emp where sal &gt;P_sal ;</span><br><span class="line"></span><br><span class="line">         end &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p>调用上面创建好的存储过程 param_pro：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set @p_sal &#x3D; 1250 ;</span><br><span class="line"></span><br><span class="line">call param_pro(7369 , @num , @p_sal);</span><br><span class="line"></span><br><span class="line">select @num , @p_sal ;</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219111727122-382478754.png" alt="img"></p>
<p>查看 emp 表，也发现 empno 为 7369 的记录确实被删除。</p>
<p>将查询结果赋值给变量时，可以使用 into 关键字，既可以在 select 子句末尾写 into 关键字，也可以在值后面写 into 语句。</p>
<h2 id="3-2-创建存储函数"><a href="#3-2-创建存储函数" class="headerlink" title="3.2 创建存储函数"></a>3.2 创建存储函数</h2><p>语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION  函数名([ 参数名 数据类型 [, …]]) RETURNS返回类型</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">　　过程体</span><br><span class="line"></span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>存储过程与存储函数一个很大的不同就是制定参数 IN、OUT、INOUT 只对存储过程有用，存储函数默认 IN 类型参数，不能设置其他两种类型。RETURNS 子句声明返回值类型也只能在存储函数中使用，且一个存储函数必须包含一个 RETURNS 语句。</p>
<p><strong>示例 3：</strong>用存储函数查询指定 empno 的员工的月薪 sal</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">delimiter &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">create function fun1(id int) returns int</span><br><span class="line"></span><br><span class="line">         begin</span><br><span class="line"></span><br><span class="line">                   return (select sal from emp where empno&#x3D;id);</span><br><span class="line"></span><br><span class="line">         end &#x2F;&#x2F;</span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p>调用存储函数 fun1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select fun1(7698)</span><br></pre></td></tr></table></figure>

<p>输出结果如下：</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219111905427-256074913.png" alt="img"></p>
<h2 id="3-3-修改存储过程和函数"><a href="#3-3-修改存储过程和函数" class="headerlink" title="3.3 修改存储过程和函数"></a>3.3 修改存储过程和函数</h2><p>使用 ALTER 语句可以修改存储过程和函数的特性。语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER &#123;PROCEDURE | FUNCTION&#125; sp_name [characteristic …]</span><br></pre></td></tr></table></figure>

<p>其中，sp_name 表示存储过程或函数的名称，characteristic 参数指定存储过程或函数的特性，可能取值有：</p>
<p>CONTAINS SQL:子程序包含 SQL 语句，但不包含读或写数据的语句。</p>
<p>NO SQL：子程序不包含 SQL 语句。</p>
<p>READS SQL DATA：子程序包含读数据的语句。</p>
<p>MODIFIES SQL DATA：子程序包含写数据的语句。</p>
<p>SQL SECURITY { DEFINER | INVOKER}：指明谁有权限执行。</p>
<p>DEFINER：只有定义者自己才能执行。</p>
<p>INVOKER：调用者可以执行。</p>
<p>COMMENT ‘string’ ：注释。</p>
<p><strong>示例 4</strong>：示例 1 中创建的存储过程 param_pro，将其读写权限该为 MODIFIES SQL DATA，并指明调用者可以执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ALTER PROCEDURE param_pro</span><br><span class="line"></span><br><span class="line">MODIFIES SQL DATA</span><br><span class="line"></span><br><span class="line">SQL SECURITY INVOKER ;</span><br></pre></td></tr></table></figure>

<h1 id="4-流程控制语句"><a href="#4-流程控制语句" class="headerlink" title="4 流程控制语句"></a>4 流程控制语句</h1><p>MySQL 中用来构造流程控制语句的有：IF 语句、CASE 语句、LOOP 语句、LEAVE 语句、ITERATE 语句、REPEAT 语句和 WHILE 语句。每一个流程中可能包含一个单独的语句，或者是使用 BEGIN…END 构造复杂语句，构造可以被嵌套。</p>
<p><strong>（1）IF 语句</strong></p>
<p>IF 语句包含多个条件判断，根据判断结果为 TRUE 或 FALSE 来执行相应的语句，语法格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">IF expr_condition THEN statement_list</span><br><span class="line"></span><br><span class="line">[ELSEIF expr_condition THEN statement_list]</span><br><span class="line"></span><br><span class="line">[ELSE statement_list]</span><br><span class="line"></span><br><span class="line">END IF</span><br></pre></td></tr></table></figure>

<p><strong>注意：所以 IF 语句都需要用 END IF 来结束，在 THEN 中执行，ELSEIF 和 ELSE 是可选的。</strong></p>
<p><strong>示例 5：</strong>有一个变量 val，判断变量值是否为空，若为空，输出“val is NULL”；否则输出“val is not NULL”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">IF val IS NULL</span><br><span class="line"></span><br><span class="line">         THEN SELECT ‘val is NULL’ ;</span><br><span class="line"></span><br><span class="line">         ELSE SELECT ‘val is not NULL’ ;</span><br><span class="line"></span><br><span class="line">END IF;</span><br></pre></td></tr></table></figure>

<p><strong>（2）CASE 语句</strong></p>
<p>CASE 是另一种条件判断语句，该语句有两种格式，第一种格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CASE case_expr</span><br><span class="line"></span><br><span class="line">WHEN when_value THEN statement_list</span><br><span class="line"></span><br><span class="line">[WHEN when_value THEN statement_list]……</span><br><span class="line"></span><br><span class="line">[ELSE statement_list]</span><br><span class="line"></span><br><span class="line">END CASE</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<p>case_expr，表示条件判断的表达式，决定了哪一个 WHEN 自己会被执行</p>
<p>When_value，表示表达式可能的值，如果，某个 when_value 表达式与 case_expr 表达式结果相同，则执行对应 THEN 关键字后的 statement 中的语句</p>
<p>Statement_list，表示不同 when_value 值的执行语句</p>
<p><strong>示例 6：</strong>使用 CASE 流程控制语句的第一种格式，判断 val 值，若等于 1 则输出‘val is 1’ ， 若等于 2 则输出‘val is 2’，或者两者都不等于则输出‘val is not 1 or 2’：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CASE val</span><br><span class="line"></span><br><span class="line">WHEN 1 THEN SELECT ‘val is 1’;</span><br><span class="line"></span><br><span class="line">WHEN 2 THEN SELECT ‘val is 2’;</span><br><span class="line"></span><br><span class="line">ELSE SELECT ‘val is not 1 or 2’;</span><br><span class="line"></span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure>

<p>CASE 语句的第二种格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CASE</span><br><span class="line"></span><br><span class="line">　　WHEN expr_condition THEN statement_list</span><br><span class="line"></span><br><span class="line">　　[WHEN expr_condition THEN statement_list]</span><br><span class="line"></span><br><span class="line">　　[ELSE statement_list]</span><br><span class="line"></span><br><span class="line">END CASE;</span><br></pre></td></tr></table></figure>

<p><strong>示例 7：</strong>使用 CASE 流程控制语句的第二种格式判断变量 val 是否为空，小于零、大于零、等于零，并作对应的输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CASE</span><br><span class="line"></span><br><span class="line">         WHEN val is NULL THEN SELECT ‘val is NULL’ ;</span><br><span class="line"></span><br><span class="line">         WHEN val &lt; 0 THEN SELECT ‘val is less than 0’ ;</span><br><span class="line"></span><br><span class="line">         WHEN val &gt; 0 THEN SELECT ‘val is greater than 0’ ;</span><br><span class="line"></span><br><span class="line">         ELSE SELECT ‘val is 0’ ;</span><br><span class="line"></span><br><span class="line">END CASE ;</span><br></pre></td></tr></table></figure>

<p><strong>注意，这里存储过程中的 CASE 语句，与控制流程函数中的 SQL CASE 表达式中的 CASE 是不同的，存储过程中，CASE 语句不能有 ELSE NULL 子句，并且用 END CASE 代替 END 来终止。</strong></p>
<p><strong>（3） LOOP 语句与 LEAVE 语句</strong></p>
<p>LOOP 语句循环语句用来重复执行某些语句，与 IF 和 CASE 语句相比，LOOP 只是创建了一个循环操作过程，并不进行条件判断。LOOP 内的语句一直被重复执行直到循环被退出，跳出循环使用的是 LEAVE 子句，LOOP 语句基本语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[loop_label:] LOOP</span><br><span class="line"></span><br><span class="line">         statement_list</span><br><span class="line"></span><br><span class="line">END LOOP [lop_label]</span><br></pre></td></tr></table></figure>

<p>loop_label 表示 LOOP 语句的标注名称，该参数可以省略。statement_list 参数表示循环执行的语句。</p>
<p><strong>示例 8：</strong>定义一个变量 id，初始值为 0，循环执行 id 加 1 的操作 ，当 id 值小于 10 时，循环重复执行，当 id 值大于或者等于 10 时，使用 LEAVE 语句退出循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DECLARE id INT DEFAULT 0;</span><br><span class="line"></span><br><span class="line">Add_loop:LOOP</span><br><span class="line"></span><br><span class="line">SET id&#x3D;id+1;</span><br><span class="line"></span><br><span class="line">IF id&gt;&#x3D;10 THEN LEAVE add_loop;</span><br><span class="line"></span><br><span class="line">END IF;</span><br><span class="line"></span><br><span class="line">END LOOP add_loop;</span><br></pre></td></tr></table></figure>

<p><strong>（4）ITERATE 语句</strong></p>
<p>ITERATE 语句用于将执行顺序转到语句段的开头处，语法格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">　　ITERATE lable</span><br></pre></td></tr></table></figure>

<p>其中，lable，表示循环的标志.注意，ITERATE 语句只可以出现在，LOOP、REPEAT 和 WHILE 语句中。ITERATE 的作用类似于 Java 和 Python 中的 continue 关键字。</p>
<p><strong>示例 9：</strong>p1 的初始值为 0，如果，p1 的值小于 10 时，重复执行 p1 加 1 的操作，当 p1 大于或等于 10，并且小于 20 时，打印消息 p1 is between 10 and 20，当 p1 大于 20 时，退出循环</p>
<p>演示 ITERATE 语句，在 LOOP 语句内的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE doiterate()</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    DECLARE p1 INT DEFAULT 0;</span><br><span class="line"></span><br><span class="line">    my_loop:LOOP</span><br><span class="line"></span><br><span class="line">        SET p1&#x3D;p1+1;</span><br><span class="line"></span><br><span class="line">        IF p1&lt;10 THEN ITERATE my_loop;</span><br><span class="line"></span><br><span class="line">        ELSEIF p1&gt;20 THEN LEAVE my_loop;</span><br><span class="line"></span><br><span class="line">        END IF;</span><br><span class="line"></span><br><span class="line">        SELECT ‘p1 is between 10 and 20’;</span><br><span class="line"></span><br><span class="line">    END LOOP my_loop;</span><br><span class="line"></span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p><strong>（5）REPEAT 语句</strong></p>
<p>REPEAT 语句用于创建一个带有条件判断的循环过程，每次语句执行完毕之后，会对条件表达式进行判断，如果表达式为真，则循环结束，否则，重复执行循环中的语句。语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[repeat_lable:] REPEAT</span><br><span class="line"></span><br><span class="line">statement_list</span><br><span class="line"></span><br><span class="line">UNTIL expr_condition</span><br><span class="line"></span><br><span class="line">END REPEAT [repeat_lable]</span><br></pre></td></tr></table></figure>

<p>其中，repeat_lable，为 REPEAT 语句的标注名称，该参数是可选的，REPEAT 语句内的语句，或语句群被重复，直至 expr_condition 为真。</p>
<p><strong>示例 10：</strong>id 值小于 10 前，重复循环让 id 值加 1，使用 REPEAT 语句，执行循环过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DECLARE id INT DEFAULT 0;</span><br><span class="line"></span><br><span class="line">REPEAT</span><br><span class="line"></span><br><span class="line">    SET id&#x3D;id+1;</span><br><span class="line"></span><br><span class="line">    UNTIL id&gt;&#x3D;10;</span><br><span class="line"></span><br><span class="line">END REPEAT;</span><br></pre></td></tr></table></figure>

<p><strong>（6）WHILE 语句</strong></p>
<p>WHILE 语句创建一个带条件判断的循环过程 与 REPEAT 不同的是，WHILE 在语句执行时，先对指定的条件进行判断，如果为真，则执行循环内的语句，否则退出循环。语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[while_lable:] WHILE expr_condition DO</span><br><span class="line"></span><br><span class="line">　　Statement_list</span><br><span class="line"></span><br><span class="line">END WHILE [while_lable]</span><br></pre></td></tr></table></figure>

<p>其中，while_lable 为 WHILE 语句的标注名称，Expr_condition，为进行判断的表达式，如果表达式为真，WHILE 语句内的语句，或语句群就被执行，直至 expr_condition 为假，退出循环。</p>
<p><strong>示例 11：</strong>创建一个变量 i，初始值为 0，当 i 小于 10 时重复执行加 1。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DECLARE i INT DEFAULT 0;</span><br><span class="line"></span><br><span class="line">WHILE i&lt;10 DO</span><br><span class="line"></span><br><span class="line">　　SET i&#x3D;i+1;</span><br><span class="line"></span><br><span class="line">END WHILE;</span><br></pre></td></tr></table></figure>

<h1 id="5-查看存储过程和函数"><a href="#5-查看存储过程和函数" class="headerlink" title="5 查看存储过程和函数"></a>5 查看存储过程和函数</h1><p><strong>（1） 使用 SHOW STATUS 语句查看存储过程和函数的状态</strong></p>
<p>SHOW STATUS 语句可以查看存储过程和函数的状态，其基本语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW &#123;PROCEDURE | FUNCTION&#125; STATUS [LIKE ‘pattern’]</span><br></pre></td></tr></table></figure>

<p>语法结构中，使用 LIKE 语句表示匹配存储过程或函数的名称。</p>
<p><strong>示例 12：</strong>查看示例 2 中创建的存储过程信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW PROCEDURE STATUS LIKE ‘param_pro’ ;</span><br></pre></td></tr></table></figure>

<p>部分输出结果如下：</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219112657060-649815465.png" alt="img"></p>
<p><strong>（2）使用 SHOW CREATE 语句查看存储过程和函数的定义</strong></p>
<p>SHOW CREATE 语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE &#123;PROCEDURE | FUNCTION&#125; sp_name</span><br></pre></td></tr></table></figure>

<p><strong>示例 13：</strong>查看示例 3 中创建的存储函数信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE FUNCTION fun1;</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219112810628-1130016802.png" alt="img"></p>
<p><strong>（3）从 information_schema.Routines 表中查看存储过程和函数信息</strong></p>
<p>MySQL 中的存储过程和函数的信息存储在 information_schema.Routines 表中，可以通过查询该表中的记录来查询存储过程和函数的信息。</p>
<p><strong>示例 14：</strong>从 Routines 表中查看形成为 param_pro 的存储过程信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM information_schema.Routines WHERE ROUTINE_NAME &#x3D; &#39;param_pro&#39; AND ROUTINE_TYPE&#x3D;&#39;PROCEDURE&#39; ;</span><br></pre></td></tr></table></figure>

<p>查询结果如下：</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1539768-20181219112856845-1941699294.png" alt="img"></p>
<h1 id="6-删除存储过程和函数"><a href="#6-删除存储过程和函数" class="headerlink" title="6 删除存储过程和函数"></a>6 删除存储过程和函数</h1><p>删除存储过程和函数可以使用 DROP 语句，其语法结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP &#123;PROCEDURE | FUNCTION &#125; [IF EXISTS] sp_name</span><br></pre></td></tr></table></figure>

<p><strong>示例 15：</strong>删除存储过程 select_pro 和存储函数 fun1。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE  IF EXISTS  select_pro ;</span><br><span class="line"></span><br><span class="line">DROP FUNCTION IF EXISTS fun1 ;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><blockquote>
<p>视图是一张虚拟的表，它实际并不存储数据，所有的数据都来源于储存的 sql 逻辑中，可以理解为视图就是将数据从物理表中查询出来再进行二次操作</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/891080852_44349.jpg" alt="img"></p>
</blockquote>
<h2 id="视图创建、修改、删除"><a href="#视图创建、修改、删除" class="headerlink" title="视图创建、修改、删除"></a>视图创建、修改、删除</h2><h3 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">语法：create view 视图名 as sql语句;</span><br><span class="line">*&#x2F;</span><br><span class="line">create view emp_v1</span><br><span class="line">as</span><br><span class="line">select * from emp;</span><br></pre></td></tr></table></figure>

<h3 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 方法一：</span><br><span class="line">create or replace view 视图名称 as sql语句</span><br><span class="line"># 方法二：</span><br><span class="line">alter view 视图名称 as sql语句</span><br></pre></td></tr></table></figure>

<h3 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 语法：drop view 视图名1,视图名2...;</span><br><span class="line">drop view emp_v1;</span><br></pre></td></tr></table></figure>

<h2 id="更新视图"><a href="#更新视图" class="headerlink" title="更新视图"></a>更新视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 虽然说视图并没有存储实际的数据，但是我们可以通过视图去修改物理表中的数据（部分情况下可以）</span><br><span class="line">create view emp_v1</span><br><span class="line">as</span><br><span class="line">select * from emp;</span><br><span class="line"></span><br><span class="line"># 视图中数据的更新和更新物理表中的数据的语法是一样的</span><br><span class="line">insert into emp_v1 values(1, &#39;qaq&#39;);</span><br><span class="line">update emp_v1 set name &#x3D; &#39;qwq&#39; where id &#x3D; 1;</span><br><span class="line">delete from emp_v1 where id &#x3D; 1;</span><br></pre></td></tr></table></figure>

<p>上面说到只有<strong>部分情况</strong>下可以通过视图更改物理表的数据</p>
<p>其中以下符合条件的视图都是<strong>不允许更新</strong>的</p>
<ul>
<li><p>包含以下关键字的 sql 语句:分组函数、distinct、group by、having、union 或者 union all</p>
<ul>
<li>```mysql<h1 id="以分组函数举例"><a href="#以分组函数举例" class="headerlink" title="以分组函数举例"></a>以分组函数举例</h1>create view emp_max<br>as<br>select max(id) from emp;<h1 id="上面我们创建了只有一个列为id最大的视图，以这个为例如果修改这个视图的话是不成功的"><a href="#上面我们创建了只有一个列为id最大的视图，以这个为例如果修改这个视图的话是不成功的" class="headerlink" title="上面我们创建了只有一个列为id最大的视图，以这个为例如果修改这个视图的话是不成功的"></a>上面我们创建了只有一个列为id最大的视图，以这个为例如果修改这个视图的话是不成功的</h1><h1 id="因为这个视图中的列名为max-id-值为emp表中id最大的值，这样去修改的话mysql是不能知道要修改的具体的物理数据是啥，所以不行"><a href="#因为这个视图中的列名为max-id-值为emp表中id最大的值，这样去修改的话mysql是不能知道要修改的具体的物理数据是啥，所以不行" class="headerlink" title="因为这个视图中的列名为max(id)值为emp表中id最大的值，这样去修改的话mysql是不能知道要修改的具体的物理数据是啥，所以不行"></a>因为这个视图中的列名为max(id)值为emp表中id最大的值，这样去修改的话mysql是不能知道要修改的具体的物理数据是啥，所以不行</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 常量视图</span><br><span class="line"></span><br><span class="line">  - 常量你修改个啥</span><br><span class="line"></span><br><span class="line">- Select 中包合子查询</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;mysql</span><br><span class="line">    create view emp_v1</span><br><span class="line">    as</span><br><span class="line">    select (select id from emp where name &#x3D; &#39;qwq&#39;) as id;</span><br><span class="line">    # 自己想想如果你是mysql你怎么知道你要通过这个视图修改啥数据？</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>join，多表</p>
<ul>
<li>```mysql<br>create view emp_v1<br>as<br>select a.id, b.name from a left join b on a.id = b.id;<h1 id="这个视图可以修改-update-但是不能删除和添加"><a href="#这个视图可以修改-update-但是不能删除和添加" class="headerlink" title="这个视图可以修改(update)但是不能删除和添加"></a>这个视图可以修改(update)但是不能删除和添加</h1><h1 id="因为这是两张表，mysql怎么知道你是删除的那张表，添加的又是那张表"><a href="#因为这是两张表，mysql怎么知道你是删除的那张表，添加的又是那张表" class="headerlink" title="因为这是两张表，mysql怎么知道你是删除的那张表，添加的又是那张表"></a>因为这是两张表，mysql怎么知道你是删除的那张表，添加的又是那张表</h1><h1 id="可以修改是因为mysql只需要去这个列对应的表中修改数据就好了"><a href="#可以修改是因为mysql只需要去这个列对应的表中修改数据就好了" class="headerlink" title="可以修改是因为mysql只需要去这个列对应的表中修改数据就好了"></a>可以修改是因为mysql只需要去这个列对应的表中修改数据就好了</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- from 一个不能更新的视图</span><br><span class="line"></span><br><span class="line">  - 数据集都来源于一个不能更新的视图了肯定就不行了呀</span><br><span class="line"></span><br><span class="line">- where 子句的子查询引用了 from 子句中的表 #TODO 记得查一下为啥</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;mysql</span><br><span class="line">    create view emp_v1</span><br><span class="line">    as</span><br><span class="line">    select * from emp e</span><br><span class="line">    where e.id in (select id from emp where id is null)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="视图和表的区别"><a href="#视图和表的区别" class="headerlink" title="视图和表的区别"></a>视图和表的区别</h2><table>
<thead>
<tr>
<th></th>
<th>创建方式</th>
<th>是否实际占用物理空间</th>
<th>使用</th>
</tr>
</thead>
<tbody><tr>
<td>视图</td>
<td>create view</td>
<td>只占有一小部分的空间，用于存储 sql 逻辑</td>
<td>增删改查，但是一般只用于查询</td>
</tr>
<tr>
<td>表</td>
<td>create table</td>
<td>保存了表数据</td>
<td>增删改查</td>
</tr>
</tbody></table>
<h2 id="视图的优缺点"><a href="#视图的优缺点" class="headerlink" title="视图的优缺点"></a>视图的优缺点</h2><h3 id="数据库视图的优点"><a href="#数据库视图的优点" class="headerlink" title="数据库视图的优点"></a>数据库视图的优点</h3><p>以下是使用数据库视图的优点：</p>
<ul>
<li><strong>数据库视图允许简化复杂查询</strong>：数据库视图由与许多基础表相关联的 SQL 语句定义。 您可以使用数据库视图来隐藏最终用户和外部应用程序的基础表的复杂性。 通过数据库视图，您只需使用简单的 SQL 语句，而不是使用具有多个连接的复杂的 SQL 语句。</li>
<li><strong>数据库视图有助于限制对特定用户的数据访问</strong>。 您可能不希望所有用户都可以查询敏感数据的子集。可以使用数据库视图将非敏感数据仅显示给特定用户组。</li>
<li><strong>数据库视图提供额外的安全层</strong>。 安全是任何关系数据库管理系统的重要组成部分。 数据库视图为数据库管理系统提供了额外的安全性。 数据库视图允许您创建只读视图，以将只读数据公开给特定用户。 用户只能以只读视图检索数据，但无法更新。</li>
<li><strong>数据库视图启用计算列</strong>。 数据库表不应该具有计算列，但数据库视图可以这样。 假设在<code>orderDetails</code>表中有<code>quantityOrder</code>(产品的数量)和<code>priceEach</code>(产品的价格)列。 但是，<code>orderDetails</code>表没有一个列用来存储订单的每个订单项的总销售额。如果有，数据库模式不是一个好的设计。 在这种情况下，您可以创建一个名为<code>total</code>的计算列，该列是<code>quantityOrder</code>和<code>priceEach</code>的乘积，以表示计算结果。当您从数据库视图中查询数据时，计算列的数据将随机计算产生。</li>
<li><strong>数据库视图实现向后兼容</strong>。 假设你有一个中央数据库，许多应用程序正在使用它。 有一天，您决定重新设计数据库以适应新的业务需求。删除一些表并创建新的表，并且不希望更改影响其他应用程序。在这种情况下，可以创建与将要删除的旧表相同的模式的数据库视图。</li>
</ul>
<h3 id="数据库视图的缺点"><a href="#数据库视图的缺点" class="headerlink" title="数据库视图的缺点"></a>数据库视图的缺点</h3><p>除了上面的优点，使用数据库视图有几个缺点：</p>
<ul>
<li>_性能_：从数据库视图查询数据可能会很慢，特别是如果视图是<strong>基于其他视图创建的</strong>。</li>
<li>_表依赖关系_：将根据数据库的基础表创建一个视图。每当更改与其相关联的表的结构时，<strong>都必须更改视图</strong>。</li>
</ul>
<hr>
<h1 id="Mysql-之数据类型"><a href="#Mysql-之数据类型" class="headerlink" title="Mysql 之数据类型"></a>Mysql 之数据类型</h1><h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/qq631243523/p/9791393.html">https://www.cnblogs.com/qq631243523/p/9791393.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/mysql/mysql-data-types.html">菜鸟教程</a></p>
<h2 id="一、数值类型"><a href="#一、数值类型" class="headerlink" title="一、数值类型"></a>一、数值类型</h2><p>MySQL 支持所有标准 SQL 数值数据类型。</p>
<p>这些类型包括<strong>严格数值</strong>数据类型(<code>INTEGER</code>、<code>SMALLINT</code>、<code>DECIMAL</code>和<code>NUMERIC</code>)，以及<strong>近似数值</strong>数据类型(<code>FLOAT</code>、<code>REAL</code>和<code>DOUBLE PRECISION</code>)。</p>
<p>关键字<code>INT</code>是<code>INTEGER</code>的<strong>同义词</strong>，关键字<code>DEC</code>是<code>DECIMAL</code>的<strong>同义词</strong>。</p>
<p><code>BIT</code>数据类型保存<strong>位字段值</strong>，并且支持 MyISAM、MEMORY、InnoDB 和 BDB 表。</p>
<p>作为 SQL 标准的扩展，MySQL 也支持整数类型<code>TINYINT</code>、<code>MEDIUMINT</code>和<code>BIGINT</code>。下面的表显示了需要的每个整数类型的存储和范围。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">范围（有符号）</th>
<th align="left">范围（无符号）</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">TINYINT(Tinyint)</td>
<td align="left">1 byte</td>
<td align="left">(-128，127)</td>
<td align="left">(0，255)</td>
<td align="left">小整数值</td>
</tr>
<tr>
<td align="left">SMALLINT(smallint)</td>
<td align="left">2 bytes</td>
<td align="left">(-32 768，32 767)</td>
<td align="left">(0，65 535)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">MEDIUMINT(mediumint)</td>
<td align="left">3 bytes</td>
<td align="left">(-8 388 608，8 388 607)</td>
<td align="left">(0，16 777 215)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">INT 或 INTEGER(int、integer)</td>
<td align="left">4 bytes</td>
<td align="left">(-2 147 483 648，2 147 483 647)</td>
<td align="left">(0，4 294 967 295)</td>
<td align="left">大整数值</td>
</tr>
<tr>
<td align="left">BIGINT(bigint)</td>
<td align="left">8 bytes</td>
<td align="left">(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td>
<td align="left">(0，18 446 744 073 709 551 615)</td>
<td align="left">极大整数值</td>
</tr>
<tr>
<td align="left">FLOAT(float)</td>
<td align="left">4 bytes</td>
<td align="left">(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td>
<td align="left">0，(1.175 494 351 E-38，3.402 823 466 E+38)</td>
<td align="left">单精度 浮点数值</td>
</tr>
<tr>
<td align="left">DOUBLE(double)</td>
<td align="left">8 bytes</td>
<td align="left">(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td>
<td align="left">双精度 浮点数值</td>
</tr>
<tr>
<td align="left">DECIMAL(decimal)</td>
<td align="left">对 DECIMAL(M,D) ，如果 M&gt;D，为 M+2 否则为 D+2</td>
<td align="left">依赖于 M 和 D 的值</td>
<td align="left">依赖于 M 和 D 的值</td>
<td align="left">小数值</td>
</tr>
</tbody></table>
<blockquote>
<p>mysql 中<code>TINYINT</code>、<code>smallint</code>、<code>MEDIUMINT</code>、<code>int\integer</code>和<code>BIGINT</code>默认都是有符号的，如果想指定为无符号需要使用<code>unsigned</code>关键字</p>
<p>如果指定了零填充则默认是无符号</p>
</blockquote>
<h3 id="整形的显示宽度"><a href="#整形的显示宽度" class="headerlink" title="整形的显示宽度"></a>整形的显示宽度</h3><p>在 mysql 的数据类型中有如下定义，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">整型类型(显示宽度)</span><br></pre></td></tr></table></figure>

<p>注意，正确的理解，其实是显示宽度，<strong>因为整型的显示宽度，对数值大小无影响，只是当设置了 zerofill 的时候，在显示的时候补 0 而已。</strong></p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1449547-20181015152509099-1787578855.png" alt="img"></p>
<p>从上面的显示我们看到，设置了宽度为 5，<strong>并且 zerofill 了</strong>，这样在查询的时候，会在前面自动补 0。<strong>宽度可以不设置，因为整数数据类型都有默认的显示宽度，不设就采用默认的。</strong></p>
<p>另外，即使设置了显示宽度，也能赋超过显示宽度的值，整型的显示宽度仅仅用于显示补 0。</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1449547-20181015152509099-1787578855.png" alt="img"></p>
<h3 id="浮点型与定点型"><a href="#浮点型与定点型" class="headerlink" title="浮点型与定点型"></a><strong>浮点型与定点型</strong></h3><p>在 mysql 的数据类型中浮点型分为两种，float()与 double()类型，定点型为 decimal()。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据类型(M,D)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>M：精度，数据的总长度；</strong></li>
<li><strong>D：标度，小数点后的长度；</strong></li>
</ul>
<p>其区别在于：</p>
<ol>
<li> 当不指定精度时，Float、Double 默认会保存实际精度，而 Decimal 默认是整数；</li>
<li> 当标度不够时，都会四舍五入，但 Decimal 会警告信息。</li>
</ol>
<p><strong><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1449547-20181015153329393-1163892650.png" alt="img"></strong></p>
<h2 id="三、日期与时间类型"><a href="#三、日期与时间类型" class="headerlink" title="三、日期与时间类型"></a><strong>三、日期与时间类型</strong></h2><p>表示时间值的日期和时间类型为<code>DATETIME</code>、<code>DATE</code>、<code>TIMESTAMP</code>、<code>TIME</code>和<code>YEAR</code>。</p>
<p>每个时间类型有一个有效值范围和一个”零”值，当指定不合法的 MySQL 不能表示的值时使用”零”值。</p>
<p>TIMESTAMP 类型有专有的自动更新特性，将在后面描述。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小 ( bytes)</th>
<th align="left">范围</th>
<th>零值</th>
<th align="left">格式</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">DATE(date)</td>
<td align="left">3</td>
<td align="left">1000-01-01/9999-12-31</td>
<td>0000:00:00</td>
<td align="left">YYYY-MM-DD</td>
<td align="left">日期值</td>
</tr>
<tr>
<td align="left">TIME(time)</td>
<td align="left">3</td>
<td align="left">‘-838:59:59’/‘838:59:59’</td>
<td>00:00:00</td>
<td align="left">HH:MM:SS</td>
<td align="left">时间值或持续时间</td>
</tr>
<tr>
<td align="left">YEAR(year)</td>
<td align="left">1</td>
<td align="left">1901/2155</td>
<td>0000</td>
<td align="left">YYYY</td>
<td align="left">年份值</td>
</tr>
<tr>
<td align="left">DATETIME(datetime)</td>
<td align="left">8</td>
<td align="left">1000-01-01 00:00:00/9999-12-31 23:59:59</td>
<td>0000-00-00 00:00:00</td>
<td align="left">YYYY-MM-DD HH:MM:SS</td>
<td align="left">混合日期和时间值</td>
</tr>
<tr>
<td align="left">TIMESTAMP(timestamp)</td>
<td align="left">4</td>
<td align="left">1970-01-01 00:00:00/2038 结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038 年 1 月 19 日 凌晨 03:14:07</td>
<td>00000000000000</td>
<td align="left">YYYYMMDD HHMMSS</td>
<td align="left">混合日期和时间值，时间戳</td>
</tr>
</tbody></table>
<p>DATE 类型前面可以加个 D，D 表示天即 24 小时，如往 DATE 类型插入 ‘2 15:20:20’；</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/1449547-20181015154059404-1017945968.png" alt="img"></p>
<p>另外 TimeStamp 类型与 DateTime 在无输入的情况下要注意下：</p>
<ol>
<li> TimeStamp 使用 Current_TimeStamp()而 DateTime 使用 NOW()来获取当前时间；</li>
<li> 输入 NULL 时，系统会输入系统当前日期与时间；</li>
<li> 无任何输入时，系统会输入系统当前日期与时间；</li>
</ol>
<h2 id="四、字符串类型"><a href="#四、字符串类型" class="headerlink" title="四、字符串类型"></a><strong>四、字符串类型</strong></h2><p>字符串类型包括 CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、ENUM 和 SET。</p>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">大小</th>
<th align="left">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CHAR(char)</td>
<td align="left">0-255 bytes</td>
<td align="left">定长字符串</td>
</tr>
<tr>
<td align="left">VARCHAR(varchar)</td>
<td align="left">0-65535 bytes</td>
<td align="left">变长字符串</td>
</tr>
<tr>
<td align="left">TINYBLOB(tinyblob)</td>
<td align="left">0-255 bytes</td>
<td align="left">不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td align="left">TINYTEXT(tinytext)</td>
<td align="left">0-255 bytes</td>
<td align="left">短文本字符串</td>
</tr>
<tr>
<td align="left">BLOB(blob)</td>
<td align="left">0-65 535 bytes</td>
<td align="left">二进制形式的长文本数据</td>
</tr>
<tr>
<td align="left">TEXT(text)</td>
<td align="left">0-65 535 bytes</td>
<td align="left">长文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMBLOB(mediumblob)</td>
<td align="left">0-16 777 215 bytes</td>
<td align="left">二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td align="left">MEDIUMTEXT(mediumtext)</td>
<td align="left">0-16 777 215 bytes</td>
<td align="left">中等长度文本数据</td>
</tr>
<tr>
<td align="left">LONGBLOB(longblob)</td>
<td align="left">0-4 294 967 295 bytes</td>
<td align="left">二进制形式的极大文本数据</td>
</tr>
<tr>
<td align="left">LONGTEXT(longtext)</td>
<td align="left">0-4 294 967 295 bytes</td>
<td align="left">极大文本数据</td>
</tr>
</tbody></table>
<h3 id="1、CHAR-与-VARCHAR"><a href="#1、CHAR-与-VARCHAR" class="headerlink" title="1、CHAR 与 VARCHAR"></a><strong>1、CHAR 与 VARCHAR</strong></h3><p>其定义方式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">字符串类型(M)</span><br></pre></td></tr></table></figure>

<p>这个 M 是长度的意思(<strong>M 是字符数</strong>)，插入该列的字符串长度将不允许超过 M 所指定的长度。另外，由于 MySQL 在建库时就指定了字符集，因此就不存在 nchar、nvarchar、ntext 这种数据类型了。</p>
<ul>
<li>char 最长可取 255；</li>
<li>varchar 最长可取 65535；</li>
</ul>
<h3 id="2、TEXT"><a href="#2、TEXT" class="headerlink" title="2、TEXT"></a><strong>2、TEXT</strong></h3><p>TEXT 分为 4 种，与 SQLServer 不同：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>允许的长度</th>
<th>存储空间</th>
</tr>
</thead>
<tbody><tr>
<td>TINYTEXT(tinytext)</td>
<td>0~255 字节</td>
<td>值的长度+2 字节</td>
</tr>
<tr>
<td>TEXT(text)</td>
<td>0~65535 字节</td>
<td>值的长度+2 字节</td>
</tr>
<tr>
<td>MEDIUMTEXT(mediumtext)</td>
<td>0~167772150 字节</td>
<td>值的长度+3 字节</td>
</tr>
<tr>
<td>LONGTEXT(longtext)</td>
<td>0~4294967295 字节</td>
<td>值的长度+4 字节</td>
</tr>
</tbody></table>
<h2 id="3、ENUM-类型"><a href="#3、ENUM-类型" class="headerlink" title="3、ENUM 类型"></a><strong>3、ENUM 类型</strong></h2><p>ENUM 类型(枚举类型)，与 C#的概念一样，在定义时指定取值范围。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">属性名 ENUM(&#39;值1&#39;,&#39;值2&#39;,&#39;值3&#39;...&#39;值n&#39;)</span><br></pre></td></tr></table></figure>

<ul>
<li>ENUM 有 NOT NULL 属性，其默认值为取值列表的第一个元素；</li>
<li>ENUM 无 NOT NULL，则 ENUM 类型将允许插入 NULL，并且 NULL 为默认值；</li>
</ul>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/121428362289426.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Test4(Sex ENUM(&#39;男&#39;,&#39;女&#39;));</span><br><span class="line">INSERT INTO Test4 VALUES(&#39;男&#39;);</span><br><span class="line">INSERT INTO Test4 VALUES(&#39;爷&#39;);    --这行报错</span><br><span class="line">SELECT * FROM Test4;</span><br></pre></td></tr></table></figure>

<h2 id="4、SET-类型"><a href="#4、SET-类型" class="headerlink" title="4、SET 类型"></a><strong>4、SET 类型</strong></h2><p>在创建表时，就指定 SET 类型的取值范围。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">属性名 SET(&#39;值1&#39;,&#39;值2&#39;,&#39;值3&#39;...,&#39;值n&#39;)</span><br></pre></td></tr></table></figure>

<p>它与 ENUM 的区别在什么地方呢？</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/121442395091653.jpg" alt="img"></p>
<p>基本上就是多选的 ENUM。</p>
<h2 id="5、二进制类型"><a href="#5、二进制类型" class="headerlink" title="5、二进制类型"></a><strong>5、二进制类型</strong></h2><p>二进制类型是在数据库中存储二进制数据的数据类型。二进制类型包括 BINARY、VARBINARY、BIT、TINYBLOB、BLOB、MEDIUMBLOB、LONGBLOB。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>取值范围</th>
</tr>
</thead>
<tbody><tr>
<td>BINARY(M)[binary]</td>
<td>字节数为 M，允许长度为 0~M 的定长二进制字符串</td>
</tr>
<tr>
<td>VARBINARY(M)[varbinary]</td>
<td>允许长度为 0~M 的变长二进制字符串，字节数为值的长度加 1</td>
</tr>
<tr>
<td>BIT(M)[bit]</td>
<td>M 位二进制数据，M 最大值为 64</td>
</tr>
<tr>
<td>TINYBLOB[tinyblob]</td>
<td>可变长二进制数据，最多 255 个字节</td>
</tr>
<tr>
<td>BLOB[blob]</td>
<td>可变长二进制数据，最多 2 的 16 次方-1 个字节</td>
</tr>
<tr>
<td>MEDIUMBLOB[mediumblob]</td>
<td>可变长二进制数据，最多 2 的 24 次方-1 个字节</td>
</tr>
<tr>
<td>LONGBLOB[longblob]</td>
<td>可变长二进制数据，最多 2 的 32 次方-1 个字节</td>
</tr>
</tbody></table>
<h3 id="1、BINARY-和-VARBINARY"><a href="#1、BINARY-和-VARBINARY" class="headerlink" title="1、BINARY 和 VARBINARY"></a><strong>1、BINARY 和 VARBINARY</strong></h3><p>两者唯一的差别在于 BINARY 当长度不够时会补\0。</p>
<h3 id="2、BIT-类型"><a href="#2、BIT-类型" class="headerlink" title="2、BIT 类型"></a><strong>2、BIT 类型</strong></h3><p>BIT 类型与 SQLServer 里的就差别大了。 其定义方式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BIT(M)</span><br></pre></td></tr></table></figure>

<p>其中”M”指定了该二进制的最大字节长度为 M，M 的最大值为 64。如 BIT(4)就是数据类型为 BIT 类型，长度为 4。其能够存储的值为 0-15。因为变成二进制后，15 的值为 1111。</p>
<p>在查询 BIT 类型的数据时，要用 BIN(字段名+0)来将值转换为二进制显示。</p>
<p><img src= "/img/loading.gif" data-lazy-src="/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/121528536183759.jpg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE Test6(BB BIT(4));</span><br><span class="line">INSERT INTO Test6 VALUES(12);</span><br><span class="line">SELECT BIN(BB+0) FROM Test6;</span><br></pre></td></tr></table></figure>

<p>上面的结果以二进制显示，最大的长度为 4。</p>
<p><strong>3、BLOB 类型</strong></p>
<p>BLOB 类型是一种特殊的二进制类型。BLOB 可以存储数据量很大的二进制数据，如图片，视频等。BLOB 类型包括 TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。它们之间的区别也只是最大长度不同。</p>
<h2 id="五、数据类型的选择"><a href="#五、数据类型的选择" class="headerlink" title="五、数据类型的选择"></a><strong>五、数据类型的选择</strong></h2><ol>
<li> 整型：根据要显示的最大值决定；</li>
<li> 浮点型：要显示小数。如果要精确到小数点后 10 位，就选择 DOUBLE，而不应该选择 FLOAT。DECIMAL 精度较高，浮点数会出现误差，如果精度较高，则应选择定点数 DECIMAL；</li>
<li> 字符串型：定长与变长的区别，CHAR 类型占用空间比较大，但是处理速度比 VARCHAR 快，如果长度变化不大，如身份证号码那种，最好选择 CHAR 类型。而对于评论字符串，最好选择 VARCHAR；</li>
<li> 时间：根据需要显示的类型咯，特别是 TIMESTAMP,如果需要显示的时间与时区对应，就应该选择 TIMESTAMP；</li>
<li> ENUM 类型和 SET 类型：长度不同，ENUM 类型最多可以由 65535 个成员，而 SET 类型最多只能包含 64 个成员。且 ENUM 只能单选，而 SET 类型可以多选；</li>
<li> TEXT 类型和 BLOB 类型：TEXT 只能存储字符数据，而 BLOB 可以存储二进制数据。如果是纯文本，适合 TEXT。如果是图片等适合存二进制；</li>
</ol>
<h2 id="六、问题总结"><a href="#六、问题总结" class="headerlink" title="六、问题总结"></a><strong>六、问题总结</strong></h2><p><strong>1、存储路径的问题</strong></p>
<p>MySQL 中，如果路径中使用”&quot;符号时，这个符号会被过滤。解决的办法是路径中用”/“或”\“来代替”&quot;。这样 MySQL 就不会自动过滤路径中的分隔符。</p>
<p><strong>2、MySQL 中的布尔类型</strong></p>
<p>MySQL 中没有 Bool 或 Boolean 类型，但是为了支持 SQL 标准，也可以定义 Bool 或 Boolean 类型的，但是 Bool 或 Boolean 类型最后转换成的是 TinyInt(1)，也就是说,在 MySQL 中，布尔类型实际上是 TinyInt(1)。</p>
<p><strong>3、MySQL 中如何存储 JPG 图片或 MP3 音乐</strong></p>
<p>一般情况下，数据库中不直接存储图片和音频文件，而是存储图片或音频文件的路径，如果在特殊情况下需要在 MySQL 数据库中存储图片和音频文件，可以选择 BLOB 类型；</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">LLQWQ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://llqwq.gitee.io/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/">http://llqwq.gitee.io/2019/09/05/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/MySQL/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://llqwq.gitee.io" target="_blank">LLQWQ的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BE%85%E6%95%B4%E7%90%86/">待整理</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post_share"><div class="social-share" data-image="/img/db-cover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/09/15/idea/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/"><img class="prev-cover" data-lazy-src="/img/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">idea错误记录</div></div></a></div><div class="next-post pull-right"><a href="/2019/08/14/idea/idea%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE/"><img class="next-cover" data-lazy-src="/img/idea-cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">idea基础配置</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/11/05/数据结构/大话数据结构-xmind/" title="数据结构 学习笔记"><img class="cover" data-lazy-src="/img/default_top.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-05</div><div class="title">数据结构 学习笔记</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/48668845.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">LLQWQ</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/LLQWQ"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LLQWQ" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://gitee.com/LLQWQ" target="_blank" title="Gitee"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-number">1.</span> <span class="toc-text">mysql 语法规范</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL"><span class="toc-number">2.</span> <span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL-data-query-language-%E8%AF%AD%E8%A8%80"><span class="toc-number">2.1.</span> <span class="toc-text">DQL(data query language)语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.1.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.2.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.3.</span> <span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.4.</span> <span class="toc-text">常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">2.1.5.</span> <span class="toc-text">分组函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.6.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.7.</span> <span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.8.</span> <span class="toc-text">子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.9.</span> <span class="toc-text">分页查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#union-%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.10.</span> <span class="toc-text">union 联合查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML-data-manipulation-language-%E8%AF%AD%E8%A8%80"><span class="toc-number">2.2.</span> <span class="toc-text">DML(data manipulation language)语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.2.1.</span> <span class="toc-text">插入语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.2.2.</span> <span class="toc-text">修改语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.2.3.</span> <span class="toc-text">删除语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-data-define-language-%E8%AF%AD%E8%A8%80"><span class="toc-number">2.3.</span> <span class="toc-text">DDL(data define language)语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%93%E5%92%8C%E8%A1%A8%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.1.</span> <span class="toc-text">库和表管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%93%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">库的管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">表的管理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.3.2.</span> <span class="toc-text">常见数据类型介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">2.3.3.</span> <span class="toc-text">常见约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD%E5%A4%A7%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">六大约束：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">约束的添加分类：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%97%E7%BA%A7%E7%BA%A6%E6%9D%9F%EF%BC%8C%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E7%9B%B4%E6%8E%A5%E5%9C%A8%E7%B1%BB%E5%9E%8B%E5%90%8E%E9%9D%A2%E5%8A%A0%E5%B0%B1%E5%A5%BD%E5%95%A6"><span class="toc-number">3.</span> <span class="toc-text">添加列级约束，创建表的时候直接在类型后面加就好啦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E5%92%8C%E9%9D%9E%E7%A9%BA%E7%9A%84%E5%AF%B9%E6%AF%94%EF%BC%9A"><span class="toc-number">3.0.0.1.</span> <span class="toc-text">主键和非空的对比：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.0.0.2.</span> <span class="toc-text">修改表时添加约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.0.0.3.</span> <span class="toc-text">修改表时删除约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%A2%9E%EF%BC%88%E6%A0%87%E8%AF%86%E5%88%97%EF%BC%89"><span class="toc-number">3.0.0.4.</span> <span class="toc-text">自增（标识列）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCL-Transation-Control-Language-%E8%AF%AD%E8%A8%80"><span class="toc-number">3.1.</span> <span class="toc-text">TCL(Transation Control Language)语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">3.1.1.</span> <span class="toc-text">事务的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%92%8C%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="toc-number">3.1.2.</span> <span class="toc-text">事务和事务处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.3.</span> <span class="toc-text">事务并发问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB"><span class="toc-number">3.1.4.</span> <span class="toc-text">事务隔离</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-%E5%AE%89%E8%A3%85-windows-%E7%89%88"><span class="toc-number">4.</span> <span class="toc-text">mysql 安装(windows 版)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E5%AE%89%E8%A3%85-Linux-%E7%89%88"><span class="toc-number">5.</span> <span class="toc-text">MySQL 安装(Linux 版)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#yum-%E5%AE%89%E8%A3%85"><span class="toc-number">5.1.</span> <span class="toc-text">yum 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%8B%90%E9%95%9C%E5%83%8F%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="toc-number">5.2.</span> <span class="toc-text">搜狐镜像手动安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AF%86%E7%A0%81%E5%92%8C%E5%AF%86%E7%A0%81%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-number">5.3.1.</span> <span class="toc-text">设置密码和密码复杂度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-mysql-%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE"><span class="toc-number">5.3.2.</span> <span class="toc-text">开启 mysql 远程访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95"><span class="toc-number">5.3.3.</span> <span class="toc-text">MySQL 安装目录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D"><span class="toc-number">6.</span> <span class="toc-text">工具介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">7.</span> <span class="toc-text">mysql 基础配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="toc-number">7.1.</span> <span class="toc-text">mysql 的配置文件位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%AE%80%E5%8D%95%E6%A6%82%E8%BF%B0"><span class="toc-number">7.2.</span> <span class="toc-text">配置文件简单概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">7.3.</span> <span class="toc-text">配置环境变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD-mysql-%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.</span> <span class="toc-text">启动和关闭 mysql 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%95%8C%E9%9D%A2%E7%9A%84%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8"><span class="toc-number">8.1.</span> <span class="toc-text">界面的方式启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8"><span class="toc-number">8.2.</span> <span class="toc-text">命令行方式启动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA"><span class="toc-number">9.</span> <span class="toc-text">mysql 登录和退出</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-mysql-%E8%87%AA%E5%B8%A6%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%99%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">9.1.</span> <span class="toc-text">使用 mysql 自带的连接器连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%9E%E6%8E%A5"><span class="toc-number">9.2.</span> <span class="toc-text">命令行连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%B7%A5%E5%85%B7%E8%BF%9E%E6%8E%A5"><span class="toc-number">9.3.</span> <span class="toc-text">使用第三方工具连接</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">10.</span> <span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="toc-number">10.1.</span> <span class="toc-text">系统变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">10.2.</span> <span class="toc-text">自定义变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql-%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">11.</span> <span class="toc-text">mysql 的常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%BB%93%E6%9D%9F%E5%AD%97%E7%AC%A6"><span class="toc-number">11.1.</span> <span class="toc-text">修改结束字符</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0"><span class="toc-number">12.</span> <span class="toc-text">存储过程与存储函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">12.1.</span> <span class="toc-text">参考资料</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E3%80%81%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0"><span class="toc-number">13.</span> <span class="toc-text">3 存储过程、存储函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">13.1.</span> <span class="toc-text">3.1 创建存储过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0"><span class="toc-number">13.2.</span> <span class="toc-text">3.2 创建存储函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E4%BF%AE%E6%94%B9%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-number">13.3.</span> <span class="toc-text">3.3 修改存储过程和函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">14.</span> <span class="toc-text">4 流程控制语句</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-number">15.</span> <span class="toc-text">5 查看存储过程和函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-number">16.</span> <span class="toc-text">6 删除存储过程和函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">17.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%88%9B%E5%BB%BA%E3%80%81%E4%BF%AE%E6%94%B9%E3%80%81%E5%88%A0%E9%99%A4"><span class="toc-number">17.1.</span> <span class="toc-text">视图创建、修改、删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">17.1.1.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE"><span class="toc-number">17.1.2.</span> <span class="toc-text">修改视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">17.1.3.</span> <span class="toc-text">删除视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%A7%86%E5%9B%BE"><span class="toc-number">17.2.</span> <span class="toc-text">更新视图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A5%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%E4%B8%BE%E4%BE%8B"><span class="toc-number">18.</span> <span class="toc-text">以分组函数举例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8A%E9%9D%A2%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E4%BA%86%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AA%E5%88%97%E4%B8%BAid%E6%9C%80%E5%A4%A7%E7%9A%84%E8%A7%86%E5%9B%BE%EF%BC%8C%E4%BB%A5%E8%BF%99%E4%B8%AA%E4%B8%BA%E4%BE%8B%E5%A6%82%E6%9E%9C%E4%BF%AE%E6%94%B9%E8%BF%99%E4%B8%AA%E8%A7%86%E5%9B%BE%E7%9A%84%E8%AF%9D%E6%98%AF%E4%B8%8D%E6%88%90%E5%8A%9F%E7%9A%84"><span class="toc-number">19.</span> <span class="toc-text">上面我们创建了只有一个列为id最大的视图，以这个为例如果修改这个视图的话是不成功的</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AA%E8%A7%86%E5%9B%BE%E4%B8%AD%E7%9A%84%E5%88%97%E5%90%8D%E4%B8%BAmax-id-%E5%80%BC%E4%B8%BAemp%E8%A1%A8%E4%B8%ADid%E6%9C%80%E5%A4%A7%E7%9A%84%E5%80%BC%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%8E%BB%E4%BF%AE%E6%94%B9%E7%9A%84%E8%AF%9Dmysql%E6%98%AF%E4%B8%8D%E8%83%BD%E7%9F%A5%E9%81%93%E8%A6%81%E4%BF%AE%E6%94%B9%E7%9A%84%E5%85%B7%E4%BD%93%E7%9A%84%E7%89%A9%E7%90%86%E6%95%B0%E6%8D%AE%E6%98%AF%E5%95%A5%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8D%E8%A1%8C"><span class="toc-number">20.</span> <span class="toc-text">因为这个视图中的列名为max(id)值为emp表中id最大的值，这样去修改的话mysql是不能知道要修改的具体的物理数据是啥，所以不行</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%99%E4%B8%AA%E8%A7%86%E5%9B%BE%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9-update-%E4%BD%86%E6%98%AF%E4%B8%8D%E8%83%BD%E5%88%A0%E9%99%A4%E5%92%8C%E6%B7%BB%E5%8A%A0"><span class="toc-number">21.</span> <span class="toc-text">这个视图可以修改(update)但是不能删除和添加</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%A0%E4%B8%BA%E8%BF%99%E6%98%AF%E4%B8%A4%E5%BC%A0%E8%A1%A8%EF%BC%8Cmysql%E6%80%8E%E4%B9%88%E7%9F%A5%E9%81%93%E4%BD%A0%E6%98%AF%E5%88%A0%E9%99%A4%E7%9A%84%E9%82%A3%E5%BC%A0%E8%A1%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%8F%88%E6%98%AF%E9%82%A3%E5%BC%A0%E8%A1%A8"><span class="toc-number">22.</span> <span class="toc-text">因为这是两张表，mysql怎么知道你是删除的那张表，添加的又是那张表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E6%98%AF%E5%9B%A0%E4%B8%BAmysql%E5%8F%AA%E9%9C%80%E8%A6%81%E5%8E%BB%E8%BF%99%E4%B8%AA%E5%88%97%E5%AF%B9%E5%BA%94%E7%9A%84%E8%A1%A8%E4%B8%AD%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%B0%B1%E5%A5%BD%E4%BA%86"><span class="toc-number">23.</span> <span class="toc-text">可以修改是因为mysql只需要去这个列对应的表中修改数据就好了</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">23.1.</span> <span class="toc-text">视图和表的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">23.2.</span> <span class="toc-text">视图的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">23.2.1.</span> <span class="toc-text">数据库视图的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%86%E5%9B%BE%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">23.2.2.</span> <span class="toc-text">数据库视图的缺点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mysql-%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.</span> <span class="toc-text">Mysql 之数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E5%8D%9A%E5%AE%A2"><span class="toc-number">24.1.</span> <span class="toc-text">参考博客</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.2.</span> <span class="toc-text">一、数值类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%BD%A2%E7%9A%84%E6%98%BE%E7%A4%BA%E5%AE%BD%E5%BA%A6"><span class="toc-number">24.2.1.</span> <span class="toc-text">整形的显示宽度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E5%9E%8B%E4%B8%8E%E5%AE%9A%E7%82%B9%E5%9E%8B"><span class="toc-number">24.2.2.</span> <span class="toc-text">浮点型与定点型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.3.</span> <span class="toc-text">三、日期与时间类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.4.</span> <span class="toc-text">四、字符串类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81CHAR-%E4%B8%8E-VARCHAR"><span class="toc-number">24.4.1.</span> <span class="toc-text">1、CHAR 与 VARCHAR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81TEXT"><span class="toc-number">24.4.2.</span> <span class="toc-text">2、TEXT</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81ENUM-%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.5.</span> <span class="toc-text">3、ENUM 类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81SET-%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.6.</span> <span class="toc-text">4、SET 类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.7.</span> <span class="toc-text">5、二进制类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81BINARY-%E5%92%8C-VARBINARY"><span class="toc-number">24.7.1.</span> <span class="toc-text">1、BINARY 和 VARBINARY</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81BIT-%E7%B1%BB%E5%9E%8B"><span class="toc-number">24.7.2.</span> <span class="toc-text">2、BIT 类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">24.8.</span> <span class="toc-text">五、数据类型的选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93"><span class="toc-number">24.9.</span> <span class="toc-text">六、问题总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/04/12/Java/Java%E9%AB%98%E7%BA%A7/JUC/JUC/" title="JUC"><img data-lazy-src="/img/Java-JUC-cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC"/></a><div class="content"><a class="title" href="/2021/04/12/Java/Java%E9%AB%98%E7%BA%A7/JUC/JUC/" title="JUC">JUC</a><time datetime="2021-04-12T05:58:52.000Z" title="发表于 2021-04-12 13:58:52">2021-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/05/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-xmind/" title="数据结构 学习笔记"><img data-lazy-src="/img/default_top.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构 学习笔记"/></a><div class="content"><a class="title" href="/2020/11/05/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A4%A7%E8%AF%9D%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-xmind/" title="数据结构 学习笔记">数据结构 学习笔记</a><time datetime="2020-11-04T16:00:00.000Z" title="发表于 2020-11-05 00:00:00">2020-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/10/21/MQ/RabbitMQ/RabbitMQ/" title="rabbitMQ 学习笔记"><img data-lazy-src="/img/rabbitMQ-cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rabbitMQ 学习笔记"/></a><div class="content"><a class="title" href="/2020/10/21/MQ/RabbitMQ/RabbitMQ/" title="rabbitMQ 学习笔记">rabbitMQ 学习笔记</a><time datetime="2020-10-20T16:00:00.000Z" title="发表于 2020-10-21 00:00:00">2020-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/10/21/MQ/RabbitMQ/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/" title="rabbitMQ 错误记录"><img data-lazy-src="/img/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="rabbitMQ 错误记录"/></a><div class="content"><a class="title" href="/2020/10/21/MQ/RabbitMQ/%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95/" title="rabbitMQ 错误记录">rabbitMQ 错误记录</a><time datetime="2020-10-20T16:00:00.000Z" title="发表于 2020-10-21 00:00:00">2020-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/08/14/zookeeper/zookeeper/" title="zookeeper 学习笔记"><img data-lazy-src="/img/zookeeper-cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="zookeeper 学习笔记"/></a><div class="content"><a class="title" href="/2020/08/14/zookeeper/zookeeper/" title="zookeeper 学习笔记">zookeeper 学习笔记</a><time datetime="2020-08-13T16:00:00.000Z" title="发表于 2020-08-14 00:00:00">2020-08-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By LLQWQ</div><div class="footer_custom_text">欸嘿( •̀ ω •́ )✧</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '0xuB3MWV96e1Y8k43L5i7ILc-gzGzoHsz',
      appKey: '82wkKDidTDRdT2iS6juoQvCQ',
      placeholder: '欸嘿( •̀ ω •́ )✧快留下你的评论吧\nps：昵称输入QQ号可以自动获得名称(中文名称可能获取不到)和头像，输入邮箱可以更快的回复您\n要是valine不能评论了可以切换到Gitalk进行评论',
      avatar: 'retro',
      meta: 'nick,mail,link'.split(','),
      pageSize: '15',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '//i0.hdslb.com/bfs/emote/',
      emojiMaps: {"2020":"dc709fac0d361370bcf0d36d32adb97df7c95824.png","tv_白眼":"c1d59f439e379ee50eef488bcb5e5378e5044ea4.png","tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_难过":"87f46748d3f142ebc6586ff58860d0e2fc8263ba.png","tv_生气":"26702dcafdab5e8225b43ffd23c94ac1ff932654.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_斜眼笑":"911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_疑问":"0793d949b18d7be716078349c202c15ff166f314.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_鼓掌":"1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png","tv_抠鼻":"c666f55e88d471e51bbd9fab9bb308110824a6eb.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_调皮":"b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png","tv_笑哭":"1abc628f6d4f4caf9d0e7800878f4697abbc8273.png","tv_晕":"5443c22b4d07fb1907ccc610c8e6db254f2461b7.png","tv_点赞":"f85c354995bd99e28fc76c869bfe42ba6438eff4.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_睡着":"8b196675b53af58264f383c50ad0945048290b33.png","tv_色":"61822c7e9aae5da76475e7892534545336b23a6f.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_无奈":"ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_流汗":"cead1c351ab8d79e9f369605beb90148db0fbed3.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_抓狂":"fe31c08edad661d63762b04e17b8d5ae3c71a757.png","tv_黑人问号":"45821a01f51bc867da9edbaa2e070410819a95b2.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_打脸":"56ab10b624063e966bfcb76ea5dc4794d87dfd47.png","tv_闭嘴":"c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png","tv_鄙视":"6e72339f346a692a495b123174b49e4e8e781303.png","tv_腼腆":"89712c0d4af73e67f89e35cbc518420380a7f6f4.png","tv_馋":"fc7e829b845c43c623c8b490ee3602b7f0e76a31.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_生病":"8b0ec90e6b86771092a498c54f09fc94621c1900.png","tv_流鼻血":"c32d39db2737f89b904ca32700d140a9241b0767.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_流泪":"7e71cde7858f0cd50d74b0264aa26db612a8a167.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_皱眉":"72ccad6679fea0d14cce648b4d818e09b8ffea2d.png","tv_鬼脸":"0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png","tv_调侃":"4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png","tv_目瞪口呆":"0b8cb81a68de5d5365212c99375e7ace3e7891b7.png","2233娘_大笑":"16b8794be990cefa6caeba4d901b934a227ee3b8.png","2233娘_疑问":"0b41f509351958dbb63d472fec0132d1bd03bd14.png","2233娘_吃惊":"d1628c43d35b1530c0504a643ff80b6189fa0a43.png","2233娘_汗":"247cd9df8cdf84b18368c21e3b2dd374e84c0927.png","2233娘_大哭":"476a2a60f6e337b8c0697a592e0aa82781f6b33b.png","2233娘_困惑":"714eeb4eae0d0933b4ff08b7df788b1982f6b940.png","2233娘_耶":"d7178e258a0efc969b65ccc2b1322fb235f5dff4.png","2233娘_怒":"f31953119c51b9748016440ac0b632f779929b37.png","2233娘_卖萌":"ea893aa25355de95ab4f03c2dad3f0c58d0c159e.png","2233娘_委屈":"d9d0bf9d358af8d5761093ec66d4e3f60d963a63.png","2233娘_郁闷":"485203fe7100f2c8fc40b2800a18fe20b35f2f1a.png","2233娘_第一":"3754ee6e5985bd0bd7dfb668981f2a8733398ebd.png","2233娘_喝水":"695bf5429472049b52c1e0de586f8a2511195a23.png","2233娘_吐魂":"e999af499edf38a91ca68b1a9d2f97042c1d6734.png","2233娘_无言":"fdb5870f32cfaf7949e0f88a13f6feba4a48b719.png","热词系列_增加":"142409b595982b8210b2958f3d340f3b47942645.png","热词系列_泪目":"bba3703ab90b7d16fe9dbcb85ed949db687f8331.png","热词系列_保护":"55f8f6445ca7c3170cdfc5b16036abf639ce9b57.png","热词系列_害怕":"d77e2de26da143249f0c0ad7a608c27152c985bf.png","热词系列_爱了爱了":"2a165b555ba20391316366c664ed7891883dc5aa.png","热词系列_问号":"c1d1e76c12180adc8558f47006fe0e7ded4154bb.png","热词系列_吹爆":"b528220f9c37256ed6a37f05bf118e44b08b81e5.png","热词系列_三连":"21f15fe11b7a84d2f2121c16dec50a4e4556f865.png","热词系列_可以":"e08543c71202b36c590094417fcfbb80c3506cd8.png","热词系列_打卡":"a9cf77c78e1b9b40aa3ed4862402fba008ee2f51.png","热词系列_妙啊":"0e98299d7decf5eaffad854977946075c3e91cb8.png","热词系列_这次一定":"a01ca28923daa7cc896c42f27deb4914e20dd572.png","热词系列_AWSL":"c37f88cf799f9badf9d84b7671dc3dd98c0fc0c2.png","热词系列_递话筒":"98e6950e39fbb4dd1c576042063ca632074070ba.png","热词系列_你细品":"535e00658e7e47966f154d3a167fa2365ebc4321.png","热词系列_咕咕":"d8065c2e7ce48c929317a94553499a46fecc262a.png","热词系列_标准结局":"3de98174b510cf7dc5fd1bd08c5d881065e79137.png","热词系列_危":"5cc6c3357c4df544dd8de9d5c5c0cec97c7c9a56.png","热词系列_张三":"255a938f39cea625032b6650036b31aa26c50a3c.png","热词系列_害":"cbe798a194612958537c5282fcca7c3bcd2aa15c.png","热词系列_我裂开了":"29bd57ec4e8952880fea6c9e47aee924e91f10c4.png","热词系列_有内味了":"7ca61680a905b5b6e2e335c630e725b648b03b4d.png","热词系列_猛男必看":"c97064450528a0e45c7e7c365a15fbb13fd61d8c.png","热词系列_奥力给":"c9b8683827ec6c00fea5327c9bec14f581cef2aa.png","热词系列_我哭了":"9e0b3877d649aaf6538fbdd3f937e240a9d808e4.png","热词系列_高产":"9db817cba4a7f4a42398f3b2ec7c0a8e0c247c42.png","热词系列_我酸了":"a8cbf3f6b8cd9377eeb15b9172f3cd683b2e4650.png","热词系列_真香":"e68497c775feaac1c3b1a6cd63a50cfb11b767c4.png","热词系列_我全都要":"d424d1ad8d14c1c9b8367842bc68c658b9229bc1.png","热词系列_神仙UP":"a49e0d0db1e7d35a0f7411be13208951ab448f03.png","热词系列_你币有了":"84820c2b147a8ca02f3c4006b63f76c6313cbfa0.png","热词系列_不愧是你":"9ff2e356797c57ee3b1675ade0883d2d2247be9b.png","热词系列_锤":"35668cc12ae25b9545420e4a85bf21a0bfc03e5d.png","热词系列_秀":"50782fbf5d9b7f48f9467b5c53932981e321eedc.png","热词系列_爷关更":"faad40c56447f1f8abcb4045c17ce159d113d1fd.png","热词系列_有生之年":"f41fdafe2d0fbb8e8bc1598d2cf37e355560103a.png","热词系列_镇站之宝":"24e7a6a6e6383c987215fb905e3ee070aca259b5.png","热词系列_我太男了":"a523f3e4c63e4db1232365765d0ec452f83be97e.png","热词系列_完结撒花":"ea9db62ff5bca8e069cd70c4233353a802835422.png","热词系列_大师球":"f30089248dd137c568edabcb07cf67e0f6e98cf3.png","热词系列_知识盲区":"ccc94600b321a28116081e49ecedaa4ee8728312.png","热词系列_“狼火”":"33ccd3617bfa89e9d1498b13b7542b63f163e5de.png","加油武汉":"eb966aaa5b690d3f9308a9f936f5b5a72a7f956b.png","口罩":"3ad2f66b151496d2a5fb0a8ea75f32265d778dd3.png","鸡腿":"c7860392815d345fa69c4f00ef18d67dccfbd574.png","微笑":"685612eadc33f6bc233776c6241813385844f182.png","笑":"81edf17314cea3b48674312b4364df44d5c01f17.png","呲牙":"b5a5898491944a4268360f2e7a84623149672eb6.png","OK":"4683fd9ffc925fa6423110979d7dcac5eda297f4.png","星星眼":"63c9d1a31c0da745b61cdb35e0ecb28635675db2.png","哦呼":"362bded07ea5434886271d23fa25f5d85d8af06c.png","嫌弃":"de4c0783aaa60ec03de0a2b90858927bfad7154b.png","喜欢":"8a10a4d73a89f665feff3d46ca56e83dc68f9eb8.png","酸了":"92b1c8cbceea3ae0e8e32253ea414783e8ba7806.png","大哭":"2caafee2e5db4db72104650d87810cc2c123fc86.png","害羞":"9d2ec4e1fbd6cb1b4d12d2bbbdd124ccb83ddfda.png","无语":"44667b7d9349957e903b1b62cb91fb9b13720f04.png","疑惑":"b7840db4b1f9f4726b7cb23c0972720c1698d661.png","调皮":"8290b7308325e3179d2154327c85640af1528617.png","喜极而泣":"485a7e0c01c2d70707daae53bee4a9e2e31ef1ed.png","奸笑":"bb84906573472f0a84cebad1e9000eb6164a6f5a.png","偷笑":"6c49d226e76c42cd8002abc47b3112bc5a92f66a.png","大笑":"ca94ad1c7e6dac895eb5b33b7836b634c614d1c0.png","阴险":"ba8d5f8e7d136d59aab52c40fd3b8a43419eb03c.png","捂脸":"6921bb43f0c634870b92f4a8ad41dada94a5296d.png","囧":"12e41d357a9807cc80ef1e1ed258127fcc791424.png","呆":"33ad6000d9f9f168a0976bc60937786f239e5d8c.png","抠鼻":"cb89184c97e3f6d50acfd7961c313ce50360d70f.png","惊喜":"0afecaf3a3499479af946f29749e1a6c285b6f65.png","惊讶":"f8e9a59cad52ae1a19622805696a35f0a0d853f3.png","笑哭":"c3043ba94babf824dea03ce500d0e73763bf4f40.png","妙啊":"b4cb77159d58614a9b787b91b1cd22a81f383535.png","doge":"bba7c12aa51fed0199c241465560dfc2714c593e.png","滑稽":"d15121545a99ac46774f1f4465b895fe2d1411c3.png","吃瓜":"4191ce3c44c2b3df8fd97c33f85d3ab15f4f3c84.png","打call":"431432c43da3ee5aab5b0e4f8931953e649e9975.png","点赞":"1a67265993913f4c35d15a6028a30724e83e7d35.png","鼓掌":"895d1fc616b4b6c830cf96012880818c0e1de00d.png","尴尬":"cb321684ed5ce6eacdc2699092ab8fe7679e4fda.png","冷":"cb0ebbd0668640f07ebfc0e03f7a18a8cd00b4ed.png","灵魂出窍":"43d3db7d97343c01b47e22cfabeca84b4251f35a.png","委屈":"d2f26cbdd6c96960320af03f5514c5b524990840.png","傲娇":"010540d0f61220a0db4922e4a679a1d8eca94f4e.png","疼":"905fd9a99ec316e353b9bd4ecd49a5f0a301eabf.png","吓":"9c10c5ebc7bef27ec641b8a1877674e0c65fea5d.png","生病":"0f25ce04ae1d7baf98650986454c634f6612cb76.png","吐":"06946bfe71ac48a6078a0b662181bb5cad09decc.png","嘘声":"e64af664d20716e090f10411496998095f62f844.png","捂眼":"c5c6d6982e1e53e478daae554b239f2b227b172b.png","思考":"cfa9b7e89e4bfe04bbcd34ccb1b0df37f4fa905c.png","再见":"fc510306bae26c9aec7e287cdf201ded27b065b9.png","翻白眼":"eba54707c7168925b18f6f8b1f48d532fe08c2b1.png","哈欠":"888d877729cbec444ddbd1cf4c9af155a7a06086.png","奋斗":"bb2060c15dba7d3fd731c35079d1617f1afe3376.png","墨镜":"3a03aebfc06339d86a68c2d893303b46f4b85771.png","撇嘴":"531863568e5668c5ac181d395508a0eeb1f0cda4.png","难过":"a651db36701610aa70a781fa98c07c9789b11543.png","抓狂":"4c87afff88c22439c45b79e9d2035d21d5622eba.png","生气":"3195714219c4b582a4fb02033dd1519913d0246d.png","干杯":"8da12d5f55a2c7e9778dcc05b40571979fe208e6.png","爱心":"ed04066ea7124106d17ffcaf75600700e5442f5c.png","锦鲤":"643d6c19c8164ffd89e3e9cdf093cf5d773d979c.png","胜利":"b49fa9f4b1e7c3477918153b82c60b114d87347c.png","加油":"c7aaeacb21e107292d3bb053e5abde4a4459ed30.png","保佑":"fafe8d3de0dc139ebe995491d2dac458a865fb30.png","抱拳":"89516218158dbea18ab78e8873060bf95d33bbbe.png","响指":"1b5c53cf14336903e1d2ae3527ca380a1256a077.png","支持":"3c210366a5585706c09d4c686a9d942b39feeb50.png","拥抱":"41780a4254750cdaaccb20735730a36044e98ef3.png","怪我咯":"07cc6077f7f7d75b8d2c722dd9d9828a9fb9e46d.png","跪了":"f2b3aee7e521de7799d4e3aa379b01be032698ac.png","黑洞":"e90ec4c799010f25391179118ccd9f66b3b279ba.png","老鼠":"8e6fb491eb1bb0d5862e7ec8ccf9a3da12b6c155.png","福到了":"5de5373d354c373cf1617b6b836f3a8d53c5a655.png"},
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/LLQWQ/Valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '62ac94f6f26fbdbc60b4',
      clientSecret: '2aa21994b6d9b95bb5605ed581e6a73c6da34eb5',
      repo: 'llqwq.github.io',
      owner: 'LLQWQ',
      admin: ['LLQWQ'],
      id: 'd584c21f3b7ce19db539063ad842e87f',
      language: 'zh-CN',
      perPage: 15,
      distractionFreeMode: true,
      pagerDirection: 'last',
      createIssueManually: true,
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script></div></body></html>